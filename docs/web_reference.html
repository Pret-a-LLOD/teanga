
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Server Reference &#8212; Teanga</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/teanga-logo.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
    <link rel="canonical" href="http://pret-a-llod.github.io/teanga/web_reference.html"/>
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="server-reference">
<span id="aiohttp-web-reference"></span><h1>Server Reference<a class="headerlink" href="#server-reference" title="Permalink to this headline">¶</a></h1>
<div class="section" id="request-and-base-request">
<span id="aiohttp-web-request"></span><h2>Request and Base Request<a class="headerlink" href="#request-and-base-request" title="Permalink to this headline">¶</a></h2>
<p>The Request object contains all the information about an incoming HTTP request.</p>
<p><a class="reference internal" href="#aiohttp.web.BaseRequest" title="aiohttp.web.BaseRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRequest</span></code></a> is used for <a class="reference internal" href="web_lowlevel.html#aiohttp-web-lowlevel"><span class="std std-ref">Low-Level
Servers</span></a> (which have no applications, routers,
signals and middlewares). <a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> has an <a class="reference internal" href="#aiohttp.web.Request.app" title="aiohttp.web.Request.app"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Request.app</span></code></a>
and <a class="reference internal" href="#aiohttp.web.Request.match_info" title="aiohttp.web.Request.match_info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Request.match_info</span></code></a> attributes.</p>
<p>A <a class="reference internal" href="#aiohttp.web.BaseRequest" title="aiohttp.web.BaseRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRequest</span></code></a> / <a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> are <code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code> like objects,
allowing them to be used for <a class="reference internal" href="web_advanced.html#aiohttp-web-data-sharing"><span class="std std-ref">sharing
data</span></a> among <a class="reference internal" href="web_advanced.html#aiohttp-web-middlewares"><span class="std std-ref">Middlewares</span></a>
and <a class="reference internal" href="web_advanced.html#aiohttp-web-signals"><span class="std std-ref">Signals</span></a> handlers.</p>
<dl class="class">
<dt id="aiohttp.web.BaseRequest">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">BaseRequest</code><a class="reference internal" href="_modules/aiohttp/web_request.html#BaseRequest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.BaseRequest" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="aiohttp.web.BaseRequest.version">
<code class="descname">version</code><a class="headerlink" href="#aiohttp.web.BaseRequest.version" title="Permalink to this definition">¶</a></dt>
<dd><p><em>HTTP version</em> of request, Read-only property.</p>
<p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">aiohttp.protocol.HttpVersion</span></code> instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.method">
<code class="descname">method</code><a class="headerlink" href="#aiohttp.web.BaseRequest.method" title="Permalink to this definition">¶</a></dt>
<dd><p><em>HTTP method</em>, read-only property.</p>
<p>The value is upper-cased <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> like <code class="docutils literal notranslate"><span class="pre">&quot;GET&quot;</span></code>,
<code class="docutils literal notranslate"><span class="pre">&quot;POST&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;PUT&quot;</span></code> etc.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.url">
<code class="descname">url</code><a class="headerlink" href="#aiohttp.web.BaseRequest.url" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code> instance with absolute URL to resource
(<em>scheme</em>, <em>host</em> and <em>port</em> are included).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In case of malformed request (e.g. without <code class="docutils literal notranslate"><span class="pre">&quot;HOST&quot;</span></code> HTTP
header) the absolute url may be unavailable.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.rel_url">
<code class="descname">rel_url</code><a class="headerlink" href="#aiohttp.web.BaseRequest.rel_url" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code> instance with relative URL to resource
(contains <em>path</em>, <em>query</em> and <em>fragment</em> parts only, <em>scheme</em>,
<em>host</em> and <em>port</em> are excluded).</p>
<p>The property is equal to <code class="docutils literal notranslate"><span class="pre">.url.relative()</span></code> but is always present.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">A note from <a class="reference internal" href="#aiohttp.web.BaseRequest.url" title="aiohttp.web.BaseRequest.url"><code class="xref py py-attr docutils literal notranslate"><span class="pre">url</span></code></a>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.scheme">
<code class="descname">scheme</code><a class="headerlink" href="#aiohttp.web.BaseRequest.scheme" title="Permalink to this definition">¶</a></dt>
<dd><p>A string representing the scheme of the request.</p>
<p>The scheme is <code class="docutils literal notranslate"><span class="pre">'https'</span></code> if transport for request handling is
<em>SSL</em>, <code class="docutils literal notranslate"><span class="pre">'http'</span></code> otherwise.</p>
<p>The value could be overridden by <a class="reference internal" href="#aiohttp.web.BaseRequest.clone" title="aiohttp.web.BaseRequest.clone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clone()</span></code></a>.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.3: </span><em>Forwarded</em> and <em>X-Forwarded-Proto</em> are not used anymore.</p>
<p>Call <code class="docutils literal notranslate"><span class="pre">.clone(scheme=new_scheme)</span></code> for setting up the value
explicitly.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-forwarded-support"><span class="std std-ref">Deploying behind a Proxy</span></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.secure">
<code class="descname">secure</code><a class="headerlink" href="#aiohttp.web.BaseRequest.secure" title="Permalink to this definition">¶</a></dt>
<dd><p>Shorthand for <code class="docutils literal notranslate"><span class="pre">request.url.scheme</span> <span class="pre">==</span> <span class="pre">'https'</span></code></p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> property.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.BaseRequest.scheme" title="aiohttp.web.BaseRequest.scheme"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scheme</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.forwarded">
<code class="descname">forwarded</code><a class="headerlink" href="#aiohttp.web.BaseRequest.forwarded" title="Permalink to this definition">¶</a></dt>
<dd><p>A tuple containing all parsed Forwarded header(s).</p>
<p>Makes an effort to parse Forwarded headers as specified by <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7239.html"><strong>RFC 7239</strong></a>:</p>
<ul class="simple">
<li>It adds one (immutable) dictionary per Forwarded <code class="docutils literal notranslate"><span class="pre">field-value</span></code>, i.e.
per proxy. The element corresponds to the data in the Forwarded
<code class="docutils literal notranslate"><span class="pre">field-value</span></code> added by the first proxy encountered by the client.
Each subsequent item corresponds to those added by later proxies.</li>
<li>It checks that every value has valid syntax in general as specified
in <span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7239.html#section-4"><strong>RFC 7239#section-4</strong></a>: either a <code class="docutils literal notranslate"><span class="pre">token</span></code> or a <code class="docutils literal notranslate"><span class="pre">quoted-string</span></code>.</li>
<li>It un-escapes <code class="docutils literal notranslate"><span class="pre">quoted-pairs</span></code>.</li>
<li>It does NOT validate ‘by’ and ‘for’ contents as specified in
<span class="target" id="index-2"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7239.html#section-6"><strong>RFC 7239#section-6</strong></a>.</li>
<li>It does NOT validate <code class="docutils literal notranslate"><span class="pre">host</span></code> contents (Host ABNF).</li>
<li>It does NOT validate <code class="docutils literal notranslate"><span class="pre">proto</span></code> contents for valid URI scheme names.</li>
</ul>
<p>Returns a tuple containing one or more <code class="docutils literal notranslate"><span class="pre">MappingProxy</span></code> objects</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.BaseRequest.scheme" title="aiohttp.web.BaseRequest.scheme"><code class="xref py py-attr docutils literal notranslate"><span class="pre">scheme</span></code></a></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.BaseRequest.host" title="aiohttp.web.BaseRequest.host"><code class="xref py py-attr docutils literal notranslate"><span class="pre">host</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.host">
<code class="descname">host</code><a class="headerlink" href="#aiohttp.web.BaseRequest.host" title="Permalink to this definition">¶</a></dt>
<dd><p>Host name of the request, resolved in this order:</p>
<ul class="simple">
<li>Overridden value by <a class="reference internal" href="#aiohttp.web.BaseRequest.clone" title="aiohttp.web.BaseRequest.clone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clone()</span></code></a> call.</li>
<li><em>Host</em> HTTP header</li>
<li><code class="xref py py-func docutils literal notranslate"><span class="pre">socket.gtfqdn()</span></code></li>
</ul>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.3: </span><em>Forwarded</em> and <em>X-Forwarded-Host</em> are not used anymore.</p>
<p>Call <code class="docutils literal notranslate"><span class="pre">.clone(host=new_host)</span></code> for setting up the value
explicitly.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-forwarded-support"><span class="std std-ref">Deploying behind a Proxy</span></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.remote">
<code class="descname">remote</code><a class="headerlink" href="#aiohttp.web.BaseRequest.remote" title="Permalink to this definition">¶</a></dt>
<dd><p>Originating IP address of a client initiated HTTP request.</p>
<p>The IP is resolved through the following headers, in this order:</p>
<ul class="simple">
<li>Overridden value by <a class="reference internal" href="#aiohttp.web.BaseRequest.clone" title="aiohttp.web.BaseRequest.clone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clone()</span></code></a> call.</li>
<li>Peer name of opened socket.</li>
</ul>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property.</p>
<p>Call <code class="docutils literal notranslate"><span class="pre">.clone(remote=new_remote)</span></code> for setting up the value
explicitly.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-forwarded-support"><span class="std std-ref">Deploying behind a Proxy</span></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.path_qs">
<code class="descname">path_qs</code><a class="headerlink" href="#aiohttp.web.BaseRequest.path_qs" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including PATH_INFO and the query string. e.g.,
<code class="docutils literal notranslate"><span class="pre">/app/blog?id=10</span></code></p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.path">
<code class="descname">path</code><a class="headerlink" href="#aiohttp.web.BaseRequest.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including <em>PATH INFO</em> without the host or scheme. e.g.,
<code class="docutils literal notranslate"><span class="pre">/app/blog</span></code>. The path is URL-decoded. For raw path info see
<a class="reference internal" href="#aiohttp.web.BaseRequest.raw_path" title="aiohttp.web.BaseRequest.raw_path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">raw_path</span></code></a>.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.raw_path">
<code class="descname">raw_path</code><a class="headerlink" href="#aiohttp.web.BaseRequest.raw_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The URL including raw <em>PATH INFO</em> without the host or scheme.
Warning, the path may be URL-encoded and may contain invalid URL
characters, e.g.
<code class="docutils literal notranslate"><span class="pre">/my%2Fpath%7Cwith%21some%25strange%24characters</span></code>.</p>
<p>For URL-decoded version please take a look on <a class="reference internal" href="#aiohttp.web.BaseRequest.path" title="aiohttp.web.BaseRequest.path"><code class="xref py py-attr docutils literal notranslate"><span class="pre">path</span></code></a>.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.query">
<code class="descname">query</code><a class="headerlink" href="#aiohttp.web.BaseRequest.query" title="Permalink to this definition">¶</a></dt>
<dd><p>A multidict with all the variables in the query string.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">MultiDictProxy</span></code> lazy property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.query_string">
<code class="descname">query_string</code><a class="headerlink" href="#aiohttp.web.BaseRequest.query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>The query string in the URL, e.g., <code class="docutils literal notranslate"><span class="pre">id=10</span></code></p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.headers">
<code class="descname">headers</code><a class="headerlink" href="#aiohttp.web.BaseRequest.headers" title="Permalink to this definition">¶</a></dt>
<dd><p>A case-insensitive multidict proxy with all headers.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">CIMultiDictProxy</span></code> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.raw_headers">
<code class="descname">raw_headers</code><a class="headerlink" href="#aiohttp.web.BaseRequest.raw_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP headers of response as unconverted bytes, a sequence of
<code class="docutils literal notranslate"><span class="pre">(key,</span> <span class="pre">value)</span></code> pairs.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.keep_alive">
<code class="descname">keep_alive</code><a class="headerlink" href="#aiohttp.web.BaseRequest.keep_alive" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if keep-alive connection enabled by HTTP client and
protocol version supports it, otherwise <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.transport">
<code class="descname">transport</code><a class="headerlink" href="#aiohttp.web.BaseRequest.transport" title="Permalink to this definition">¶</a></dt>
<dd><p>An <span class="xref std std-ref">transport</span> used to process request,
Read-only property.</p>
<p>The property can be used, for example, for getting IP address of
client’s peer:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">peername</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">transport</span><span class="o">.</span><span class="n">get_extra_info</span><span class="p">(</span><span class="s1">&#39;peername&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">peername</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">host</span><span class="p">,</span> <span class="n">port</span> <span class="o">=</span> <span class="n">peername</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.cookies">
<code class="descname">cookies</code><a class="headerlink" href="#aiohttp.web.BaseRequest.cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>A multidict of all request’s cookies.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">MultiDictProxy</span></code> lazy property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.content">
<code class="descname">content</code><a class="headerlink" href="#aiohttp.web.BaseRequest.content" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="streams.html#aiohttp.StreamReader" title="aiohttp.StreamReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamReader</span></code></a> instance,
input stream for reading request’s <em>BODY</em>.</p>
<p>Read-only property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.body_exists">
<code class="descname">body_exists</code><a class="headerlink" href="#aiohttp.web.BaseRequest.body_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if request has <em>HTTP BODY</em>, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> property.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.can_read_body">
<code class="descname">can_read_body</code><a class="headerlink" href="#aiohttp.web.BaseRequest.can_read_body" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if request’s <em>HTTP BODY</em> can be read, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
<p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> property.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.content_type">
<code class="descname">content_type</code><a class="headerlink" href="#aiohttp.web.BaseRequest.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property with <em>content</em> part of <em>Content-Type</em> header.</p>
<p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> like <code class="docutils literal notranslate"><span class="pre">'text/html'</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Returns value is <code class="docutils literal notranslate"><span class="pre">'application/octet-stream'</span></code> if no
Content-Type header present in HTTP headers according to
<span class="target" id="index-3"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc2616.html"><strong>RFC 2616</strong></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.charset">
<code class="descname">charset</code><a class="headerlink" href="#aiohttp.web.BaseRequest.charset" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that specifies the <em>encoding</em> for the request’s BODY.</p>
<p>The value is parsed from the <em>Content-Type</em> HTTP header.</p>
<p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> like <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if
<em>Content-Type</em> has no charset information.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.content_length">
<code class="descname">content_length</code><a class="headerlink" href="#aiohttp.web.BaseRequest.content_length" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns length of the request’s BODY.</p>
<p>The value is parsed from the <em>Content-Length</em> HTTP header.</p>
<p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if <em>Content-Length</em> is absent.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.http_range">
<code class="descname">http_range</code><a class="headerlink" href="#aiohttp.web.BaseRequest.http_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns information about <em>Range</em> HTTP header.</p>
<p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">slice</span></code> where <code class="docutils literal notranslate"><span class="pre">.start</span></code> is <em>left inclusive
bound</em>, <code class="docutils literal notranslate"><span class="pre">.stop</span></code> is <em>right exclusive bound</em> and <code class="docutils literal notranslate"><span class="pre">.step</span></code> is
<code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>The property might be used in two manners:</p>
<ol class="arabic">
<li><p class="first">Attribute-access style (example assumes that both left and
right borders are set, the real logic for case of open bounds
is more complex):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">rng</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">http_range</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">rng</span><span class="o">.</span><span class="n">stop</span><span class="o">-</span><span class="n">rng</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Slice-style:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">return</span> <span class="n">buffer</span><span class="p">[</span><span class="n">request</span><span class="o">.</span><span class="n">http_range</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.if_modified_since">
<code class="descname">if_modified_since</code><a class="headerlink" href="#aiohttp.web.BaseRequest.if_modified_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns the date specified in the
<em>If-Modified-Since</em> header.</p>
<p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if
<em>If-Modified-Since</em> header is absent or is not a valid
HTTP date.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.if_unmodified_since">
<code class="descname">if_unmodified_since</code><a class="headerlink" href="#aiohttp.web.BaseRequest.if_unmodified_since" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns the date specified in the
<em>If-Unmodified-Since</em> header.</p>
<p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if
<em>If-Unmodified-Since</em> header is absent or is not a valid
HTTP date.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRequest.if_range">
<code class="descname">if_range</code><a class="headerlink" href="#aiohttp.web.BaseRequest.if_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns the date specified in the
<em>If-Range</em> header.</p>
<p>Returns <code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code> or <code class="docutils literal notranslate"><span class="pre">None</span></code> if
<em>If-Range</em> header is absent or is not a valid
HTTP date.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.BaseRequest.clone">
<code class="descname">clone</code><span class="sig-paren">(</span><em>*</em>, <em>method=...</em>, <em>rel_url=...</em>, <em>headers=...</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_request.html#BaseRequest.clone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.BaseRequest.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Clone itself with replacement some attributes.</p>
<p>Creates and returns a new instance of Request object. If no parameters
are given, an exact copy is returned. If a parameter is not passed, it
will reuse the one from the current request object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>method</strong> (<em>str</em>) – http method</li>
<li><strong>rel_url</strong> – url to use, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code></li>
<li><strong>headers</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">CIMultiDict</span></code> or compatible
headers container.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a cloned <a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.BaseRequest.get_extra_info">
<code class="descname">get_extra_info</code><span class="sig-paren">(</span><em>name</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#aiohttp.web.BaseRequest.get_extra_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads extra information from the protocol’s transport.
If no value associated with <code class="docutils literal notranslate"><span class="pre">name</span></code> is found, <code class="docutils literal notranslate"><span class="pre">default</span></code> is returned.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>str</em>) – The key to look up in the transport extra information.</li>
<li><strong>default</strong> – Default value to be used when no value for <code class="docutils literal notranslate"><span class="pre">name</span></code> is
found (default is <code class="docutils literal notranslate"><span class="pre">None</span></code>).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.7.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.Request">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Request</code><a class="reference internal" href="_modules/aiohttp/web_request.html#Request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Request" title="Permalink to this definition">¶</a></dt>
<dd><p>A request used for receiving request’s information by <em>web handler</em>.</p>
<p>Every <a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">handler</span></a> accepts a request
instance as the first positional parameter.</p>
<p>The class in derived from <a class="reference internal" href="#aiohttp.web.BaseRequest" title="aiohttp.web.BaseRequest"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRequest</span></code></a>, shares all parent’s
attributes and methods but has a couple of additional properties:</p>
<dl class="attribute">
<dt id="aiohttp.web.Request.match_info">
<code class="descname">match_info</code><a class="headerlink" href="#aiohttp.web.Request.match_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property with <code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractMatchInfo</span></code>
instance for result of route resolving.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Exact type of property depends on used router.  If
<code class="docutils literal notranslate"><span class="pre">app.router</span></code> is <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDispatcher</span></code></a> the property contains
<a class="reference internal" href="#aiohttp.web.UrlMappingMatchInfo" title="aiohttp.web.UrlMappingMatchInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlMappingMatchInfo</span></code></a> instance.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.app">
<code class="descname">app</code><a class="headerlink" href="#aiohttp.web.Request.app" title="Permalink to this definition">¶</a></dt>
<dd><p>An <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> instance used to call <a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">request handler</span></a>, Read-only property.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Request.config_dict">
<code class="descname">config_dict</code><a class="headerlink" href="#aiohttp.web.Request.config_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="structures.html#aiohttp.ChainMapProxy" title="aiohttp.ChainMapProxy"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiohttp.ChainMapProxy</span></code></a> instance for mapping all properties
from the current application returned by <a class="reference internal" href="#aiohttp.web.Request.app" title="aiohttp.web.Request.app"><code class="xref py py-attr docutils literal notranslate"><span class="pre">app</span></code></a> property
and all its parents.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-data-sharing-app-config"><span class="std std-ref">Application’s config</span></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.2.</span></p>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You should never create the <a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> instance manually
– <a class="reference internal" href="web.html#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal notranslate"><span class="pre">aiohttp.web</span></code></a> does it for you. But
<a class="reference internal" href="#aiohttp.web.BaseRequest.clone" title="aiohttp.web.BaseRequest.clone"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clone()</span></code></a> may be used for cloning <em>modified</em>
request copy with changed <em>path</em>, <em>method</em> etc.</p>
</div>
</dd></dl>

</div>
<div class="section" id="response-classes">
<span id="aiohttp-web-response"></span><h2>Response classes<a class="headerlink" href="#response-classes" title="Permalink to this headline">¶</a></h2>
<p>For now, <a class="reference internal" href="web.html#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal notranslate"><span class="pre">aiohttp.web</span></code></a> has three classes for the <em>HTTP response</em>:
<a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamResponse</span></code></a>, <a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> and <a class="reference internal" href="#aiohttp.web.FileResponse" title="aiohttp.web.FileResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">FileResponse</span></code></a>.</p>
<p>Usually you need to use the second one. <a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamResponse</span></code></a> is
intended for streaming data, while <a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> contains <em>HTTP
BODY</em> as an attribute and sends own content as single piece with the
correct <em>Content-Length HTTP header</em>.</p>
<p>For sake of design decisions <a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> is derived from
<a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamResponse</span></code></a> parent class.</p>
<p>The response supports <em>keep-alive</em> handling out-of-the-box if
<em>request</em> supports it.</p>
<p>You can disable <em>keep-alive</em> by <a class="reference internal" href="#aiohttp.web.StreamResponse.force_close" title="aiohttp.web.StreamResponse.force_close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">force_close()</span></code></a> though.</p>
<p>The common case for sending an answer from
<a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">web-handler</span></a> is returning a
<a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> instance:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;All right!&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Response classes are <code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code> like objects,
allowing them to be used for <a class="reference internal" href="web_advanced.html#aiohttp-web-data-sharing"><span class="std std-ref">sharing
data</span></a> among <a class="reference internal" href="web_advanced.html#aiohttp-web-middlewares"><span class="std std-ref">Middlewares</span></a>
and <a class="reference internal" href="web_advanced.html#aiohttp-web-signals"><span class="std std-ref">Signals</span></a> handlers:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">resp</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0: </span>Dict-like interface support.</p>
</div>
<div class="section" id="streamresponse">
<h3>StreamResponse<a class="headerlink" href="#streamresponse" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.StreamResponse">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">StreamResponse</code><span class="sig-paren">(</span><em>*</em>, <em>status=200</em>, <em>reason=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#StreamResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for the <em>HTTP response</em> handling.</p>
<p>Contains methods for setting <em>HTTP response headers</em>, <em>cookies</em>,
<em>response status code</em>, writing <em>HTTP response BODY</em> and so on.</p>
<p>The most important thing you should know about <em>response</em> — it
is <em>Finite State Machine</em>.</p>
<p>That means you can do any manipulations with <em>headers</em>, <em>cookies</em>
and <em>status code</em> only before <code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code> coroutine is called.</p>
<p>Once you call <code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code> any change of
the <em>HTTP header</em> part will raise <code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code> exception.</p>
<p>Any <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code> call after <code class="xref py py-meth docutils literal notranslate"><span class="pre">write_eof()</span></code> is also forbidden.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>status</strong> (<em>int</em>) – HTTP status code, <code class="docutils literal notranslate"><span class="pre">200</span></code> by default.</li>
<li><strong>reason</strong> (<em>str</em>) – HTTP reason. If param is <code class="docutils literal notranslate"><span class="pre">None</span></code> reason will be
calculated basing on <em>status</em>
parameter. Otherwise pass <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> with
arbitrary <em>status</em> explanation..</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.prepared">
<code class="descname">prepared</code><a class="headerlink" href="#aiohttp.web.StreamResponse.prepared" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> property, <code class="docutils literal notranslate"><span class="pre">True</span></code> if <code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code> has
been called, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.task">
<code class="descname">task</code><a class="headerlink" href="#aiohttp.web.StreamResponse.task" title="Permalink to this definition">¶</a></dt>
<dd><p>A task that serves HTTP request handling.</p>
<p>May be useful for graceful shutdown of long-running requests
(streaming, long polling or web-socket).</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.status">
<code class="descname">status</code><a class="headerlink" href="#aiohttp.web.StreamResponse.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property for <em>HTTP response status code</em>, <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">200</span></code> (OK) by default.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.reason">
<code class="descname">reason</code><a class="headerlink" href="#aiohttp.web.StreamResponse.reason" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property for <em>HTTP response reason</em>, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.set_status">
<code class="descname">set_status</code><span class="sig-paren">(</span><em>status</em>, <em>reason=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#StreamResponse.set_status"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.set_status" title="Permalink to this definition">¶</a></dt>
<dd><p>Set <a class="reference internal" href="#aiohttp.web.StreamResponse.status" title="aiohttp.web.StreamResponse.status"><code class="xref py py-attr docutils literal notranslate"><span class="pre">status</span></code></a> and <a class="reference internal" href="#aiohttp.web.StreamResponse.reason" title="aiohttp.web.StreamResponse.reason"><code class="xref py py-attr docutils literal notranslate"><span class="pre">reason</span></code></a>.</p>
<p><em>reason</em> value is auto calculated if not specified (<code class="docutils literal notranslate"><span class="pre">None</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.keep_alive">
<code class="descname">keep_alive</code><a class="headerlink" href="#aiohttp.web.StreamResponse.keep_alive" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, copy of <code class="xref py py-attr docutils literal notranslate"><span class="pre">Request.keep_alive</span></code> by default.</p>
<p>Can be switched to <code class="docutils literal notranslate"><span class="pre">False</span></code> by <a class="reference internal" href="#aiohttp.web.StreamResponse.force_close" title="aiohttp.web.StreamResponse.force_close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">force_close()</span></code></a> call.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.force_close">
<code class="descname">force_close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#StreamResponse.force_close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.force_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Disable <a class="reference internal" href="#aiohttp.web.StreamResponse.keep_alive" title="aiohttp.web.StreamResponse.keep_alive"><code class="xref py py-attr docutils literal notranslate"><span class="pre">keep_alive</span></code></a> for connection. There are no ways to
enable it back.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.compression">
<code class="descname">compression</code><a class="headerlink" href="#aiohttp.web.StreamResponse.compression" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> property, <code class="docutils literal notranslate"><span class="pre">True</span></code> if compression is enabled.</p>
<p><code class="docutils literal notranslate"><span class="pre">False</span></code> by default.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.enable_compression" title="aiohttp.web.StreamResponse.enable_compression"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_compression()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.enable_compression">
<code class="descname">enable_compression</code><span class="sig-paren">(</span><em>force=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#StreamResponse.enable_compression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.enable_compression" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable compression.</p>
<p>When <em>force</em> is unset compression encoding is selected based on
the request’s <em>Accept-Encoding</em> header.</p>
<p><em>Accept-Encoding</em> is not checked if <em>force</em> is set to a
<a class="reference internal" href="#aiohttp.web.ContentCoding" title="aiohttp.web.ContentCoding"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContentCoding</span></code></a>.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.compression" title="aiohttp.web.StreamResponse.compression"><code class="xref py py-attr docutils literal notranslate"><span class="pre">compression</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.chunked">
<code class="descname">chunked</code><a class="headerlink" href="#aiohttp.web.StreamResponse.chunked" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, indicates if chunked encoding is on.</p>
<p>Can be enabled by <a class="reference internal" href="#aiohttp.web.StreamResponse.enable_chunked_encoding" title="aiohttp.web.StreamResponse.enable_chunked_encoding"><code class="xref py py-meth docutils literal notranslate"><span class="pre">enable_chunked_encoding()</span></code></a> call.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.enable_chunked_encoding" title="aiohttp.web.StreamResponse.enable_chunked_encoding"><code class="xref py py-attr docutils literal notranslate"><span class="pre">enable_chunked_encoding</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.enable_chunked_encoding">
<code class="descname">enable_chunked_encoding</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#StreamResponse.enable_chunked_encoding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.enable_chunked_encoding" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables <a class="reference internal" href="#aiohttp.web.StreamResponse.chunked" title="aiohttp.web.StreamResponse.chunked"><code class="xref py py-attr docutils literal notranslate"><span class="pre">chunked</span></code></a> encoding for response. There are no ways to
disable it back. With enabled <a class="reference internal" href="#aiohttp.web.StreamResponse.chunked" title="aiohttp.web.StreamResponse.chunked"><code class="xref py py-attr docutils literal notranslate"><span class="pre">chunked</span></code></a> encoding each <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code>
operation encoded in separate chunk.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>chunked encoding can be enabled for <code class="docutils literal notranslate"><span class="pre">HTTP/1.1</span></code> only.</p>
<p class="last">Setting up both <a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">content_length</span></code></a> and chunked
encoding is mutually exclusive.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.StreamResponse.chunked" title="aiohttp.web.StreamResponse.chunked"><code class="xref py py-attr docutils literal notranslate"><span class="pre">chunked</span></code></a></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.headers">
<code class="descname">headers</code><a class="headerlink" href="#aiohttp.web.StreamResponse.headers" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">CIMultiDict</span></code> instance
for <em>outgoing</em> <em>HTTP headers</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.cookies">
<code class="descname">cookies</code><a class="headerlink" href="#aiohttp.web.StreamResponse.cookies" title="Permalink to this definition">¶</a></dt>
<dd><p>An instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">http.cookies.SimpleCookie</span></code> for <em>outgoing</em> cookies.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Direct setting up <em>Set-Cookie</em> header may be overwritten by
explicit calls to cookie manipulation.</p>
<p class="last">We are encourage using of <a class="reference internal" href="#aiohttp.web.StreamResponse.cookies" title="aiohttp.web.StreamResponse.cookies"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cookies</span></code></a> and
<a class="reference internal" href="#aiohttp.web.StreamResponse.set_cookie" title="aiohttp.web.StreamResponse.set_cookie"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_cookie()</span></code></a>, <a class="reference internal" href="#aiohttp.web.StreamResponse.del_cookie" title="aiohttp.web.StreamResponse.del_cookie"><code class="xref py py-meth docutils literal notranslate"><span class="pre">del_cookie()</span></code></a> for cookie
manipulations.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.set_cookie">
<code class="descname">set_cookie</code><span class="sig-paren">(</span><em>name</em>, <em>value</em>, <em>*</em>, <em>path='/'</em>, <em>expires=None</em>, <em>domain=None</em>, <em>max_age=None</em>, <em>secure=None</em>, <em>httponly=None</em>, <em>version=None</em>, <em>samesite=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#StreamResponse.set_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.set_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenient way for setting <a class="reference internal" href="#aiohttp.web.StreamResponse.cookies" title="aiohttp.web.StreamResponse.cookies"><code class="xref py py-attr docutils literal notranslate"><span class="pre">cookies</span></code></a>, allows to specify
some additional properties like <em>max_age</em> in a single call.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>str</em>) – cookie name</li>
<li><strong>value</strong> (<em>str</em>) – cookie value (will be converted to
<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> if value has another type).</li>
<li><strong>expires</strong> – expiration date (optional)</li>
<li><strong>domain</strong> (<em>str</em>) – cookie domain (optional)</li>
<li><strong>max_age</strong> (<em>int</em>) – defines the lifetime of the cookie, in
seconds.  The delta-seconds value is a
decimal non- negative integer.  After
delta-seconds seconds elapse, the client
should discard the cookie.  A value of zero
means the cookie should be discarded
immediately.  (optional)</li>
<li><strong>path</strong> (<em>str</em>) – specifies the subset of URLs to
which this cookie applies. (optional, <code class="docutils literal notranslate"><span class="pre">'/'</span></code> by default)</li>
<li><strong>secure</strong> (<em>bool</em>) – attribute (with no value) directs
the user agent to use only (unspecified)
secure means to contact the origin server
whenever it sends back this cookie.
The user agent (possibly under the user’s
control) may determine what level of
security it considers appropriate for
“secure” cookies.  The <em>secure</em> should be
considered security advice from the server
to the user agent, indicating that it is in
the session’s interest to protect the cookie
contents. (optional)</li>
<li><strong>httponly</strong> (<em>bool</em>) – <code class="docutils literal notranslate"><span class="pre">True</span></code> if the cookie HTTP only (optional)</li>
<li><strong>version</strong> (<em>int</em>) – a decimal integer, identifies to which
version of the state management
specification the cookie
conforms. (Optional, <em>version=1</em> by default)</li>
<li><strong>samesite</strong> (<em>str</em>) – <p>Asserts that a cookie must not be sent with
cross-origin requests, providing some protection
against cross-site request forgery attacks.
Generally the value should be one of: <code class="docutils literal notranslate"><span class="pre">None</span></code>,
<code class="docutils literal notranslate"><span class="pre">Lax</span></code> or <code class="docutils literal notranslate"><span class="pre">Strict</span></code>. (optional)</p>
<blockquote>
<div><div class="versionadded">
<p><span class="versionmodified">New in version 3.7.</span></p>
</div>
</div></blockquote>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">In HTTP version 1.1, <code class="docutils literal notranslate"><span class="pre">expires</span></code> was deprecated and replaced with
the easier-to-use <code class="docutils literal notranslate"><span class="pre">max-age</span></code>, but Internet Explorer (IE6, IE7,
and IE8) <strong>does not</strong> support <code class="docutils literal notranslate"><span class="pre">max-age</span></code>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StreamResponse.del_cookie">
<code class="descname">del_cookie</code><span class="sig-paren">(</span><em>name</em>, <em>*</em>, <em>path='/'</em>, <em>domain=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#StreamResponse.del_cookie"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StreamResponse.del_cookie" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes cookie.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<em>str</em>) – cookie name</li>
<li><strong>domain</strong> (<em>str</em>) – optional cookie domain</li>
<li><strong>path</strong> (<em>str</em>) – optional cookie path, <code class="docutils literal notranslate"><span class="pre">'/'</span></code> by default</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.content_length">
<code class="descname">content_length</code><a class="headerlink" href="#aiohttp.web.StreamResponse.content_length" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Content-Length</em> for outgoing response.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.content_type">
<code class="descname">content_type</code><a class="headerlink" href="#aiohttp.web.StreamResponse.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Content</em> part of <em>Content-Type</em> for outgoing response.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.charset">
<code class="descname">charset</code><a class="headerlink" href="#aiohttp.web.StreamResponse.charset" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Charset</em> aka <em>encoding</em> part of <em>Content-Type</em> for outgoing response.</p>
<p>The value converted to lower-case on attribute assigning.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StreamResponse.last_modified">
<code class="descname">last_modified</code><a class="headerlink" href="#aiohttp.web.StreamResponse.last_modified" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Last-Modified</em> header for outgoing response.</p>
<p>This property accepts raw <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> values,
<code class="xref py py-class docutils literal notranslate"><span class="pre">datetime.datetime</span></code> objects, Unix timestamps specified
as an <code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code> or a <code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code> object, and the
value <code class="docutils literal notranslate"><span class="pre">None</span></code> to unset the header.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="response">
<h3>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.Response">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Response</code><span class="sig-paren">(</span><em>*</em>, <em>body=None</em>, <em>status=200</em>, <em>reason=None</em>, <em>text=None</em>, <em>headers=None</em>, <em>content_type=None</em>, <em>charset=None</em>, <em>zlib_executor_size=sentinel</em>, <em>zlib_executor=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#Response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Response" title="Permalink to this definition">¶</a></dt>
<dd><p>The most usable response class, inherited from <a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamResponse</span></code></a>.</p>
<p>Accepts <em>body</em> argument for setting the <em>HTTP response BODY</em>.</p>
<p>The actual <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code></a> sending happens in overridden
<code class="xref py py-meth docutils literal notranslate"><span class="pre">write_eof()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>body</strong> (<em>bytes</em>) – response’s BODY</li>
<li><strong>status</strong> (<em>int</em>) – HTTP status code, 200 OK by default.</li>
<li><strong>headers</strong> (<em>collections.abc.Mapping</em>) – HTTP headers that should be added to
response’s ones.</li>
<li><strong>text</strong> (<em>str</em>) – response’s BODY</li>
<li><strong>content_type</strong> (<em>str</em>) – response’s content type. <code class="docutils literal notranslate"><span class="pre">'text/plain'</span></code>
if <em>text</em> is passed also,
<code class="docutils literal notranslate"><span class="pre">'application/octet-stream'</span></code> otherwise.</li>
<li><strong>charset</strong> (<em>str</em>) – response’s charset. <code class="docutils literal notranslate"><span class="pre">'utf-8'</span></code> if <em>text</em> is
passed also, <code class="docutils literal notranslate"><span class="pre">None</span></code> otherwise.</li>
<li><strong>zlib_executor_size</strong> (<em>int</em>) – <dl class="docutils">
<dt>length in bytes which will trigger zlib compression</dt>
<dd>of body to happen in an executor</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.5.</span></p>
</div>
</li>
<li><strong>zlib_executor</strong> (<em>int</em>) – <p>executor to use for zlib compression</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.5.</span></p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.Response.body">
<code class="descname">body</code><a class="headerlink" href="#aiohttp.web.Response.body" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-write attribute for storing response’s content aka BODY,
<code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code>.</p>
<p>Setting <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code></a> also recalculates
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">content_length</span></code></a> value.</p>
<p>Assigning <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> to <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code></a> will make the <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code></a>
type of <code class="xref py py-class docutils literal notranslate"><span class="pre">aiohttp.payload.StringPayload</span></code>, which tries to encode
the given data based on <em>Content-Type</em> HTTP header, while defaulting
to <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>.</p>
<p>Resetting <a class="reference internal" href="#aiohttp.web.Response.body" title="aiohttp.web.Response.body"><code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code></a> (assigning <code class="docutils literal notranslate"><span class="pre">None</span></code>) sets
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">content_length</span></code></a> to <code class="docutils literal notranslate"><span class="pre">None</span></code> too, dropping
<em>Content-Length</em> HTTP header.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Response.text">
<code class="descname">text</code><a class="headerlink" href="#aiohttp.web.Response.text" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-write attribute for storing response’s content, represented as
string, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>.</p>
<p>Setting <a class="reference internal" href="#aiohttp.web.Response.text" title="aiohttp.web.Response.text"><code class="xref py py-attr docutils literal notranslate"><span class="pre">text</span></code></a> also recalculates
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">content_length</span></code></a> value and
<code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code> value</p>
<p>Resetting <a class="reference internal" href="#aiohttp.web.Response.text" title="aiohttp.web.Response.text"><code class="xref py py-attr docutils literal notranslate"><span class="pre">text</span></code></a> (assigning <code class="docutils literal notranslate"><span class="pre">None</span></code>) sets
<a class="reference internal" href="#aiohttp.web.StreamResponse.content_length" title="aiohttp.web.StreamResponse.content_length"><code class="xref py py-attr docutils literal notranslate"><span class="pre">content_length</span></code></a> to <code class="docutils literal notranslate"><span class="pre">None</span></code> too, dropping
<em>Content-Length</em> HTTP header.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="fileresponse">
<h3>FileResponse<a class="headerlink" href="#fileresponse" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.FileResponse">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">FileResponse</code><span class="sig-paren">(</span><em>*</em>, <em>path</em>, <em>chunk_size=256*1024</em>, <em>status=200</em>, <em>reason=None</em>, <em>headers=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_fileresponse.html#FileResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.FileResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>The response class used to send files, inherited from <a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamResponse</span></code></a>.</p>
<p>Supports the <code class="docutils literal notranslate"><span class="pre">Content-Range</span></code> and <code class="docutils literal notranslate"><span class="pre">If-Range</span></code> HTTP Headers in requests.</p>
<p>The actual <code class="xref py py-attr docutils literal notranslate"><span class="pre">body</span></code> sending happens in overridden <code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> – Path to file. Accepts both <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code>.</li>
<li><strong>chunk_size</strong> (<em>int</em>) – Chunk size in bytes which will be passed into
<code class="xref py py-meth docutils literal notranslate"><span class="pre">io.RawIOBase.read()</span></code> in the event that the
<code class="docutils literal notranslate"><span class="pre">sendfile</span></code> system call is not supported.</li>
<li><strong>status</strong> (<em>int</em>) – HTTP status code, <code class="docutils literal notranslate"><span class="pre">200</span></code> by default.</li>
<li><strong>reason</strong> (<em>str</em>) – HTTP reason. If param is <code class="docutils literal notranslate"><span class="pre">None</span></code> reason will be
calculated basing on <em>status</em>
parameter. Otherwise pass <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> with
arbitrary <em>status</em> explanation..</li>
<li><strong>headers</strong> (<em>collections.abc.Mapping</em>) – HTTP headers that should be added to
response’s ones. The <code class="docutils literal notranslate"><span class="pre">Content-Type</span></code> response header
will be overridden if provided.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="websocketresponse">
<h3>WebSocketResponse<a class="headerlink" href="#websocketresponse" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.WebSocketResponse">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">WebSocketResponse</code><span class="sig-paren">(</span><em>*</em>, <em>timeout=10.0</em>, <em>receive_timeout=None</em>, <em>autoclose=True</em>, <em>autoping=True</em>, <em>heartbeat=None</em>, <em>protocols=()</em>, <em>compress=True</em>, <em>max_msg_size=4194304</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for handling server-side websockets, inherited from
<a class="reference internal" href="#aiohttp.web.StreamResponse" title="aiohttp.web.StreamResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">StreamResponse</span></code></a>.</p>
<p>After starting (by <code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code> call) the response you
cannot use <code class="xref py py-meth docutils literal notranslate"><span class="pre">write()</span></code> method but should to
communicate with websocket client by <code class="xref py py-meth docutils literal notranslate"><span class="pre">send_str()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">receive()</span></code> and others.</p>
<p>To enable back-pressure from slow websocket clients treat methods
<code class="xref py py-meth docutils literal notranslate"><span class="pre">ping()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">pong()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">send_str()</span></code>,
<code class="xref py py-meth docutils literal notranslate"><span class="pre">send_bytes()</span></code>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">send_json()</span></code> as coroutines.  By
default write buffer size is set to 64k.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>autoping</strong> (<em>bool</em>) – Automatically send
<a class="reference internal" href="websocket_utilities.html#aiohttp.WSMsgType.PONG" title="aiohttp.WSMsgType.PONG"><code class="xref py py-const docutils literal notranslate"><span class="pre">PONG</span></code></a> on
<a class="reference internal" href="websocket_utilities.html#aiohttp.WSMsgType.PING" title="aiohttp.WSMsgType.PING"><code class="xref py py-const docutils literal notranslate"><span class="pre">PING</span></code></a>
message from client, and handle
<a class="reference internal" href="websocket_utilities.html#aiohttp.WSMsgType.PONG" title="aiohttp.WSMsgType.PONG"><code class="xref py py-const docutils literal notranslate"><span class="pre">PONG</span></code></a>
responses from client.
Note that server does not send
<a class="reference internal" href="websocket_utilities.html#aiohttp.WSMsgType.PING" title="aiohttp.WSMsgType.PING"><code class="xref py py-const docutils literal notranslate"><span class="pre">PING</span></code></a>
requests, you need to do this explicitly
using <code class="xref py py-meth docutils literal notranslate"><span class="pre">ping()</span></code> method.</li>
<li><strong>heartbeat</strong> (<em>float</em>) – Send <cite>ping</cite> message every <cite>heartbeat</cite>
seconds and wait <cite>pong</cite> response, close
connection if <cite>pong</cite> response is not
received. The timer is reset on any data reception.</li>
<li><strong>receive_timeout</strong> (<em>float</em>) – Timeout value for <cite>receive</cite>
operations.  Default value is None
(no timeout for receive operation)</li>
<li><strong>compress</strong> (<em>bool</em>) – Enable per-message deflate extension support.
False for disabled, default value is True.</li>
<li><strong>max_msg_size</strong> (<em>int</em>) – <dl class="docutils">
<dt>maximum size of read websocket message, 4</dt>
<dd>MB by default. To disable the size limit use <code class="docutils literal notranslate"><span class="pre">0</span></code>.</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.3.</span></p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The class supports <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> statement for iterating over
incoming messages:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">WebSocketResponse</span><span class="p">()</span>
<span class="k">await</span> <span class="n">ws</span><span class="o">.</span><span class="n">prepare</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">for</span> <span class="n">msg</span> <span class="ow">in</span> <span class="n">ws</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.can_prepare">
<code class="descname">can_prepare</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.can_prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.can_prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs checks for <em>request</em> data to figure out if websocket
can be started on the request.</p>
<p>If <a class="reference internal" href="#aiohttp.web.WebSocketResponse.can_prepare" title="aiohttp.web.WebSocketResponse.can_prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">can_prepare()</span></code></a> call is success then <code class="xref py py-meth docutils literal notranslate"><span class="pre">prepare()</span></code> will
success too.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> (<a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><em>aiohttp.web.Request</em></a>) – HTTP request object, that the
response answers.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><a class="reference internal" href="#aiohttp.web.WebSocketReady" title="aiohttp.web.WebSocketReady"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketReady</span></code></a> instance.<p><a class="reference internal" href="#aiohttp.web.WebSocketReady.ok" title="aiohttp.web.WebSocketReady.ok"><code class="xref py py-attr docutils literal notranslate"><span class="pre">WebSocketReady.ok</span></code></a> is
<code class="docutils literal notranslate"><span class="pre">True</span></code> on success, <a class="reference internal" href="#aiohttp.web.WebSocketReady.protocol" title="aiohttp.web.WebSocketReady.protocol"><code class="xref py py-attr docutils literal notranslate"><span class="pre">WebSocketReady.protocol</span></code></a> is
websocket subprotocol which is passed by client and
accepted by server (one of <em>protocols</em> sequence from
<a class="reference internal" href="#aiohttp.web.WebSocketResponse" title="aiohttp.web.WebSocketResponse"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketResponse</span></code></a> ctor).
<a class="reference internal" href="#aiohttp.web.WebSocketReady.protocol" title="aiohttp.web.WebSocketReady.protocol"><code class="xref py py-attr docutils literal notranslate"><span class="pre">WebSocketReady.protocol</span></code></a> may be <code class="docutils literal notranslate"><span class="pre">None</span></code> if
client and server subprotocols are not overlapping.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The method never raises exception.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.WebSocketResponse.closed">
<code class="descname">closed</code><a class="headerlink" href="#aiohttp.web.WebSocketResponse.closed" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, <code class="docutils literal notranslate"><span class="pre">True</span></code> if connection has been closed or in process
of closing.
<a class="reference internal" href="websocket_utilities.html#aiohttp.WSMsgType.CLOSE" title="aiohttp.WSMsgType.CLOSE"><code class="xref py py-const docutils literal notranslate"><span class="pre">CLOSE</span></code></a> message has been received from peer.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.WebSocketResponse.close_code">
<code class="descname">close_code</code><a class="headerlink" href="#aiohttp.web.WebSocketResponse.close_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property, close code from peer. It is set to <code class="docutils literal notranslate"><span class="pre">None</span></code> on
opened connection.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.WebSocketResponse.ws_protocol">
<code class="descname">ws_protocol</code><a class="headerlink" href="#aiohttp.web.WebSocketResponse.ws_protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Websocket <em>subprotocol</em> chosen after <code class="xref py py-meth docutils literal notranslate"><span class="pre">start()</span></code> call.</p>
<p>May be <code class="docutils literal notranslate"><span class="pre">None</span></code> if server and client protocols are
not overlapping.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.WebSocketResponse.exception">
<code class="descname">exception</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketResponse.exception"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketResponse.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns last occurred exception or None.</p>
</dd></dl>

</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_quickstart.html#aiohttp-web-websockets"><span class="std std-ref">WebSockets handling</span></a></p>
</div>
</div>
<div class="section" id="websocketready">
<h3>WebSocketReady<a class="headerlink" href="#websocketready" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.WebSocketReady">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">WebSocketReady</code><a class="reference internal" href="_modules/aiohttp/web_ws.html#WebSocketReady"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.WebSocketReady" title="Permalink to this definition">¶</a></dt>
<dd><p>A named tuple for returning result from
<a class="reference internal" href="#aiohttp.web.WebSocketResponse.can_prepare" title="aiohttp.web.WebSocketResponse.can_prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">WebSocketResponse.can_prepare()</span></code></a>.</p>
<p>Has <code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code> check implemented, e.g.:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="k">await</span> <span class="n">ws</span><span class="o">.</span><span class="n">can_prepare</span><span class="p">(</span><span class="o">...</span><span class="p">):</span>
    <span class="n">cannot_start_websocket</span><span class="p">()</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="aiohttp.web.WebSocketReady.ok">
<code class="descname">ok</code><a class="headerlink" href="#aiohttp.web.WebSocketReady.ok" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if websocket connection can be established, <code class="docutils literal notranslate"><span class="pre">False</span></code>
otherwise.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.WebSocketReady.protocol">
<code class="descname">protocol</code><a class="headerlink" href="#aiohttp.web.WebSocketReady.protocol" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> represented selected websocket sub-protocol.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp.web.WebSocketResponse.can_prepare" title="aiohttp.web.WebSocketResponse.can_prepare"><code class="xref py py-meth docutils literal notranslate"><span class="pre">WebSocketResponse.can_prepare()</span></code></a></p>
</div>
</dd></dl>

</div>
<div class="section" id="json-response">
<h3>json_response<a class="headerlink" href="#json-response" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="aiohttp.web.json_response">
<code class="descclassname">aiohttp.web.</code><code class="descname">json_response</code><span class="sig-paren">(</span><span class="optional">[</span><em>data</em>, <span class="optional">]</span><em>*</em>, <em>text=None</em>, <em>body=None</em>, <em>status=200</em>, <em>reason=None</em>, <em>headers=None</em>, <em>content_type='application/json'</em>, <em>dumps=json.dumps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_response.html#json_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.json_response" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Return <a class="reference internal" href="#aiohttp.web.Response" title="aiohttp.web.Response"><code class="xref py py-class docutils literal notranslate"><span class="pre">Response</span></code></a> with predefined <code class="docutils literal notranslate"><span class="pre">'application/json'</span></code>
content type and <em>data</em> encoded by <code class="docutils literal notranslate"><span class="pre">dumps</span></code> parameter
(<code class="xref py py-func docutils literal notranslate"><span class="pre">json.dumps()</span></code> by default).</p>
</div>
</div>
<div class="section" id="application-and-router">
<span id="aiohttp-web-app-and-router"></span><h2>Application and Router<a class="headerlink" href="#application-and-router" title="Permalink to this headline">¶</a></h2>
<div class="section" id="application">
<h3>Application<a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h3>
<p>Application is a synonym for web-server.</p>
<p>To get fully working example, you have to make <em>application</em>, register
supported urls in <em>router</em> and pass it to <a class="reference internal" href="#aiohttp.web.run_app" title="aiohttp.web.run_app"><code class="xref py py-func docutils literal notranslate"><span class="pre">aiohttp.web.run_app()</span></code></a>
or <a class="reference internal" href="#aiohttp.web.AppRunner" title="aiohttp.web.AppRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiohttp.web.AppRunner</span></code></a>.</p>
<p><em>Application</em> contains a <em>router</em> instance and a list of callbacks that
will be called during application finishing.</p>
<p><a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> is a <code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>-like object, so you can use it for
<a class="reference internal" href="web_advanced.html#aiohttp-web-data-sharing"><span class="std std-ref">sharing data</span></a> globally by storing arbitrary
properties for later access from a <a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">handler</span></a> via the
<a class="reference internal" href="#aiohttp.web.Request.app" title="aiohttp.web.Request.app"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Request.app</span></code></a> property:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Application</span><span class="p">()</span>
<span class="n">app</span><span class="p">[</span><span class="s1">&#39;database&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="k">await</span> <span class="n">aiopg</span><span class="o">.</span><span class="n">create_engine</span><span class="p">(</span><span class="o">**</span><span class="n">db_config</span><span class="p">)</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">with</span> <span class="p">(</span><span class="k">await</span> <span class="n">request</span><span class="o">.</span><span class="n">app</span><span class="p">[</span><span class="s1">&#39;database&#39;</span><span class="p">])</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
        <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;DELETE * FROM table&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Although <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> is a <code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>-like object, it can’t be
duplicated like one using <code class="xref py py-meth docutils literal notranslate"><span class="pre">Application.copy()</span></code>.</p>
<dl class="class">
<dt id="aiohttp.web.Application">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Application</code><span class="sig-paren">(</span><em>*</em>, <em>logger=&lt;default&gt;</em>, <em>middlewares=()</em>, <em>handler_args=None</em>, <em>client_max_size=1024**2</em>, <em>debug=...</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_app.html#Application"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>The class inherits <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>logger</strong> – <p><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code> instance for storing application logs.</p>
<p>By default the value is <code class="docutils literal notranslate"><span class="pre">logging.getLogger(&quot;aiohttp.web&quot;)</span></code></p>
</li>
<li><strong>middlewares</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of middleware factories, see
<a class="reference internal" href="web_advanced.html#aiohttp-web-middlewares"><span class="std std-ref">Middlewares</span></a> for details.</li>
<li><strong>handler_args</strong> – dict-like object that overrides keyword arguments of
<a class="reference internal" href="#aiohttp.web.AppRunner" title="aiohttp.web.AppRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AppRunner</span></code></a> constructor.</li>
<li><strong>client_max_size</strong> – client’s maximum size in a request, in
bytes.  If a POST request exceeds this
value, it raises an
<cite>HTTPRequestEntityTooLarge</cite> exception.</li>
<li><strong>debug</strong> – <p>Switches debug mode.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 3.5: </span>The argument does nothing starting from 4.0,
use asyncio <span class="xref std std-ref">asyncio-debug-mode</span> instead.</p>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.Application.router">
<code class="descname">router</code><a class="headerlink" href="#aiohttp.web.Application.router" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only property that returns <em>router instance</em>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.logger">
<code class="descname">logger</code><a class="headerlink" href="#aiohttp.web.Application.logger" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code> instance for storing application logs.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.debug">
<code class="descname">debug</code><a class="headerlink" href="#aiohttp.web.Application.debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Boolean value indicating whether the debug mode is turned on or off.</p>
<div class="deprecated">
<p><span class="versionmodified">Deprecated since version 3.5: </span>Use asyncio <span class="xref std std-ref">asyncio-debug-mode</span> instead.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.on_response_prepare">
<code class="descname">on_response_prepare</code><a class="headerlink" href="#aiohttp.web.Application.on_response_prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="signals.html#aiohttp.Signal" title="aiohttp.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal</span></code></a> that is fired at the beginning
of <code class="xref py py-meth docutils literal notranslate"><span class="pre">StreamResponse.prepare()</span></code> with parameters <em>request</em> and
<em>response</em>. It can be used, for example, to add custom headers to each
response before sending.</p>
<p>Signal handlers should have the following signature:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">on_prepare</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.on_startup">
<code class="descname">on_startup</code><a class="headerlink" href="#aiohttp.web.Application.on_startup" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="signals.html#aiohttp.Signal" title="aiohttp.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal</span></code></a> that is fired on application start-up.</p>
<p>Subscribers may use the signal to run background tasks in the event
loop along with the application’s request handler just after the
application start-up.</p>
<p>Signal handlers should have the following signature:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">on_startup</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-signals"><span class="std std-ref">Signals</span></a> and <a class="reference internal" href="web_advanced.html#aiohttp-web-cleanup-ctx"><span class="std std-ref">Cleanup Context</span></a>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.on_shutdown">
<code class="descname">on_shutdown</code><a class="headerlink" href="#aiohttp.web.Application.on_shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="signals.html#aiohttp.Signal" title="aiohttp.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal</span></code></a> that is fired on application shutdown.</p>
<p>Subscribers may use the signal for gracefully closing long running
connections, e.g. websockets and data streaming.</p>
<p>Signal handlers should have the following signature:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">on_shutdown</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>It’s up to end user to figure out which <a class="reference internal" href="glossary.html#term-web-handler"><span class="xref std std-term">web-handler</span></a>s
are still alive and how to finish them properly.</p>
<p>We suggest keeping a list of long running handlers in
<a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> dictionary.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-graceful-shutdown"><span class="std std-ref">Graceful shutdown</span></a> and <a class="reference internal" href="#aiohttp.web.Application.on_cleanup" title="aiohttp.web.Application.on_cleanup"><code class="xref py py-attr docutils literal notranslate"><span class="pre">on_cleanup</span></code></a>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.on_cleanup">
<code class="descname">on_cleanup</code><a class="headerlink" href="#aiohttp.web.Application.on_cleanup" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference internal" href="signals.html#aiohttp.Signal" title="aiohttp.Signal"><code class="xref py py-class docutils literal notranslate"><span class="pre">Signal</span></code></a> that is fired on application cleanup.</p>
<p>Subscribers may use the signal for gracefully closing
connections to database server etc.</p>
<p>Signal handlers should have the following signature:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">on_cleanup</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-signals"><span class="std std-ref">Signals</span></a> and <a class="reference internal" href="#aiohttp.web.Application.on_shutdown" title="aiohttp.web.Application.on_shutdown"><code class="xref py py-attr docutils literal notranslate"><span class="pre">on_shutdown</span></code></a>.</p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Application.cleanup_ctx">
<code class="descname">cleanup_ctx</code><a class="headerlink" href="#aiohttp.web.Application.cleanup_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of <em>context generators</em> for <em>startup</em>/<em>cleanup</em> handling.</p>
<p>Signal handlers should have the following signature:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">async</span> <span class="k">def</span> <span class="nf">context</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="c1"># do startup stuff</span>
    <span class="k">yield</span>
    <span class="c1"># do cleanup</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_advanced.html#aiohttp-web-cleanup-ctx"><span class="std std-ref">Cleanup Context</span></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Application.add_subapp">
<code class="descname">add_subapp</code><span class="sig-paren">(</span><em>prefix</em>, <em>subapp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_app.html#Application.add_subapp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Application.add_subapp" title="Permalink to this definition">¶</a></dt>
<dd><p>Register nested sub-application under given path <em>prefix</em>.</p>
<p>In resolving process if request’s path starts with <em>prefix</em> then
further resolving is passed to <em>subapp</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>prefix</strong> (<em>str</em>) – path’s prefix for the resource.</li>
<li><strong>subapp</strong> (<a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><em>Application</em></a>) – nested application attached under <em>prefix</em>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="#aiohttp.web.PrefixedSubAppResource" title="aiohttp.web.PrefixedSubAppResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">PrefixedSubAppResource</span></code></a> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Application.add_domain">
<code class="descname">add_domain</code><span class="sig-paren">(</span><em>domain</em>, <em>subapp</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_app.html#Application.add_domain"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Application.add_domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Register nested sub-application that serves
the domain name or domain name mask.</p>
<p>In resolving process if request.headers[‘host’]
matches the pattern <em>domain</em> then
further resolving is passed to <em>subapp</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>domain</strong> (<em>str</em>) – domain or mask of domain for the resource.</li>
<li><strong>subapp</strong> (<a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><em>Application</em></a>) – nested application.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <code class="xref py py-class docutils literal notranslate"><span class="pre">MatchedSubAppResource</span></code> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.Application.add_routes">
<code class="descname">add_routes</code><span class="sig-paren">(</span><em>routes_table</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_app.html#Application.add_routes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Application.add_routes" title="Permalink to this definition">¶</a></dt>
<dd><p>Register route definitions from <em>routes_table</em>.</p>
<p>The table is a <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> items or
<a class="reference internal" href="#aiohttp.web.RouteTableDef" title="aiohttp.web.RouteTableDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteTableDef</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of registered <a class="reference internal" href="#aiohttp.web.AbstractRoute" title="aiohttp.web.AbstractRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRoute</span></code></a> instances.</td>
</tr>
</tbody>
</table>
<p>The method is a shortcut for
<code class="docutils literal notranslate"><span class="pre">app.router.add_routes(routes_table)</span></code>, see also
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_routes" title="aiohttp.web.UrlDispatcher.add_routes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_routes()</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.7: </span>Return value updated from <code class="docutils literal notranslate"><span class="pre">None</span></code> to <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of
<a class="reference internal" href="#aiohttp.web.AbstractRoute" title="aiohttp.web.AbstractRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRoute</span></code></a> instances.</p>
</div>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Application object has <a class="reference internal" href="#aiohttp.web.Application.router" title="aiohttp.web.Application.router"><code class="xref py py-attr docutils literal notranslate"><span class="pre">router</span></code></a> attribute but has no
<code class="docutils literal notranslate"><span class="pre">add_route()</span></code> method. The reason is: we want to support
different router implementations (even maybe not url-matching
based but traversal ones).</p>
<p>For sake of that fact we have very trivial ABC for
<code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRouter</span></code>: it should have only
<code class="xref py py-meth docutils literal notranslate"><span class="pre">AbstractRouter.resolve()</span></code> coroutine.</p>
<p class="last">No methods for adding routes or route reversing (getting URL by
route name). All those are router implementation details (but,
sure, you need to deal with that methods after choosing the
router for your application).</p>
</div>
</dd></dl>

</div>
<div class="section" id="server">
<h3>Server<a class="headerlink" href="#server" title="Permalink to this headline">¶</a></h3>
<p>A protocol factory compatible with
<code class="xref py py-meth docutils literal notranslate"><span class="pre">create_server()</span></code>.</p>
<dl class="class">
<dt id="aiohttp.web.Server">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Server</code><a class="reference internal" href="_modules/aiohttp/web_server.html#Server"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Server" title="Permalink to this definition">¶</a></dt>
<dd><p>The class is responsible for creating HTTP protocol
objects that can handle HTTP connections.</p>
<dl class="attribute">
<dt id="aiohttp.web.Server.connections">
<code class="descname">connections</code><a class="headerlink" href="#aiohttp.web.Server.connections" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all currently opened connections.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.Server.requests_count">
<code class="descname">requests_count</code><a class="headerlink" href="#aiohttp.web.Server.requests_count" title="Permalink to this definition">¶</a></dt>
<dd><p>Amount of processed requests.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="router">
<h3>Router<a class="headerlink" href="#router" title="Permalink to this headline">¶</a></h3>
<p>For dispatching URLs to <a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">handlers</span></a>
<a class="reference internal" href="web.html#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal notranslate"><span class="pre">aiohttp.web</span></code></a> uses <em>routers</em>.</p>
<p>Router is any object that implements <code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRouter</span></code> interface.</p>
<p><a class="reference internal" href="web.html#module-aiohttp.web" title="aiohttp.web"><code class="xref py py-mod docutils literal notranslate"><span class="pre">aiohttp.web</span></code></a> provides an implementation called <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDispatcher</span></code></a>.</p>
<p><a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> uses <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDispatcher</span></code></a> as <code class="xref py py-meth docutils literal notranslate"><span class="pre">router()</span></code> by default.</p>
<dl class="class">
<dt id="aiohttp.web.UrlDispatcher">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">UrlDispatcher</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher" title="Permalink to this definition">¶</a></dt>
<dd><p>Straightforward url-matching router, implements
<code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Mapping</span></code> for access to <em>named routes</em>.</p>
<p>Before running <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> you should fill <em>route
table</em> first by calling <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> and <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_static()</span></code></a>.</p>
<p><a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">Handler</span></a> lookup is performed by iterating on
added <em>routes</em> in FIFO order. The first matching <em>route</em> will be used
to call corresponding <em>handler</em>.</p>
<p>If on route creation you specify <em>name</em> parameter the result is
<em>named route</em>.</p>
<p><em>Named route</em> can be retrieved by <code class="docutils literal notranslate"><span class="pre">app.router[name]</span></code> call, checked for
existence by <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">in</span> <span class="pre">app.router</span></code> etc.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#aiohttp-web-route"><span class="std std-ref">Route classes</span></a></p>
</div>
<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_resource">
<code class="descname">add_resource</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_resource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Append a <a class="reference internal" href="glossary.html#term-resource"><span class="xref std std-term">resource</span></a> to the end of route table.</p>
<p><em>path</em> may be either <em>constant</em> string like <code class="docutils literal notranslate"><span class="pre">'/a/b/c'</span></code> or
<em>variable rule</em> like <code class="docutils literal notranslate"><span class="pre">'/a/{var}'</span></code> (see
<a class="reference internal" href="web_quickstart.html#aiohttp-web-variable-handler"><span class="std std-ref">handling variable paths</span></a>)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> (<em>str</em>) – resource path spec.</li>
<li><strong>name</strong> (<em>str</em>) – optional resource name.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">created resource instance (<a class="reference internal" href="#aiohttp.web.PlainResource" title="aiohttp.web.PlainResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">PlainResource</span></code></a> or
<a class="reference internal" href="#aiohttp.web.DynamicResource" title="aiohttp.web.DynamicResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicResource</span></code></a>).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_route">
<code class="descname">add_route</code><span class="sig-paren">(</span><em>method</em>, <em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_route"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_route" title="Permalink to this definition">¶</a></dt>
<dd><p>Append <a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">handler</span></a> to the end of route table.</p>
<dl class="docutils">
<dt><em>path</em> may be either <em>constant</em> string like <code class="docutils literal notranslate"><span class="pre">'/a/b/c'</span></code> or</dt>
<dd><em>variable rule</em> like <code class="docutils literal notranslate"><span class="pre">'/a/{var}'</span></code> (see
<a class="reference internal" href="web_quickstart.html#aiohttp-web-variable-handler"><span class="std std-ref">handling variable paths</span></a>)</dd>
</dl>
<p>Pay attention please: <em>handler</em> must be a coroutine.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>method</strong> (<em>str</em>) – <p>HTTP method for route. Should be one of
<code class="docutils literal notranslate"><span class="pre">'GET'</span></code>, <code class="docutils literal notranslate"><span class="pre">'POST'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PUT'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'DELETE'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PATCH'</span></code>, <code class="docutils literal notranslate"><span class="pre">'HEAD'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'OPTIONS'</span></code> or <code class="docutils literal notranslate"><span class="pre">'*'</span></code> for any method.</p>
<p>The parameter is case-insensitive, e.g. you
can push <code class="docutils literal notranslate"><span class="pre">'get'</span></code> as well as <code class="docutils literal notranslate"><span class="pre">'GET'</span></code>.</p>
</li>
<li><strong>path</strong> (<em>str</em>) – route path. Should be started with slash (<code class="docutils literal notranslate"><span class="pre">'/'</span></code>).</li>
<li><strong>handler</strong> (<em>callable</em>) – route handler.</li>
<li><strong>name</strong> (<em>str</em>) – optional route name.</li>
<li><strong>expect_handler</strong> (<em>coroutine</em>) – optional <em>expect</em> header handler.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">new <code class="xref py py-class docutils literal notranslate"><span class="pre">PlainRoute</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">DynamicRoute</span></code> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_routes">
<code class="descname">add_routes</code><span class="sig-paren">(</span><em>routes_table</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_routes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_routes" title="Permalink to this definition">¶</a></dt>
<dd><p>Register route definitions from <em>routes_table</em>.</p>
<p>The table is a <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> items or
<a class="reference internal" href="#aiohttp.web.RouteTableDef" title="aiohttp.web.RouteTableDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteTableDef</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of registered <a class="reference internal" href="#aiohttp.web.AbstractRoute" title="aiohttp.web.AbstractRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRoute</span></code></a> instances.</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.7: </span>Return value updated from <code class="docutils literal notranslate"><span class="pre">None</span></code> to <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of
<a class="reference internal" href="#aiohttp.web.AbstractRoute" title="aiohttp.web.AbstractRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRoute</span></code></a> instances.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_get">
<code class="descname">add_get</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>allow_head=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_get" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for adding a GET handler. Calls the <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">method</span></code> equals to <code class="docutils literal notranslate"><span class="pre">'GET'</span></code>.</p>
<p>If <em>allow_head</em> is <code class="docutils literal notranslate"><span class="pre">True</span></code> (default) the route for method HEAD
is added with the same handler as for GET.</p>
<p>If <em>name</em> is provided the name for HEAD route is suffixed with
<code class="docutils literal notranslate"><span class="pre">'-head'</span></code>. For example <code class="docutils literal notranslate"><span class="pre">router.add_get(path,</span> <span class="pre">handler,</span>
<span class="pre">name='route')</span></code> call adds two routes: first for GET with name
<code class="docutils literal notranslate"><span class="pre">'route'</span></code> and second for HEAD with name <code class="docutils literal notranslate"><span class="pre">'route-head'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_post">
<code class="descname">add_post</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_post" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for adding a POST handler. Calls the <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> with </p>
<p><code class="docutils literal notranslate"><span class="pre">method</span></code> equals to <code class="docutils literal notranslate"><span class="pre">'POST'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_head">
<code class="descname">add_head</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_head" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for adding a HEAD handler. Calls the <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">method</span></code> equals to <code class="docutils literal notranslate"><span class="pre">'HEAD'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_put">
<code class="descname">add_put</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_put" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for adding a PUT handler. Calls the <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">method</span></code> equals to <code class="docutils literal notranslate"><span class="pre">'PUT'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_patch">
<code class="descname">add_patch</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for adding a PATCH handler. Calls the <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">method</span></code> equals to <code class="docutils literal notranslate"><span class="pre">'PATCH'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_delete">
<code class="descname">add_delete</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for adding a DELETE handler. Calls the <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">method</span></code> equals to <code class="docutils literal notranslate"><span class="pre">'DELETE'</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_view">
<code class="descname">add_view</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_view"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for adding a class-based view handler. Calls the <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_route()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">method</span></code> equals to <code class="docutils literal notranslate"><span class="pre">'*'</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.add_static">
<code class="descname">add_static</code><span class="sig-paren">(</span><em>prefix</em>, <em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em>, <em>chunk_size=256*1024</em>, <em>response_factory=StreamResponse</em>, <em>show_index=False</em>, <em>follow_symlinks=False</em>, <em>append_version=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.add_static"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.add_static" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a router and a handler for returning static files.</p>
<p>Useful for serving static content like images, javascript and css files.</p>
<p>On platforms that support it, the handler will transfer files more
efficiently using the <code class="docutils literal notranslate"><span class="pre">sendfile</span></code> system call.</p>
<p>In some situations it might be necessary to avoid using the <code class="docutils literal notranslate"><span class="pre">sendfile</span></code>
system call even if the platform supports it. This can be accomplished by
by setting environment variable <code class="docutils literal notranslate"><span class="pre">AIOHTTP_NOSENDFILE=1</span></code>.</p>
<p>If a gzip version of the static content exists at file path + <code class="docutils literal notranslate"><span class="pre">.gz</span></code>, it
will be used for the response.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Use <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_static()</span></code></a> for development only. In production,
static content should be processed by web servers like <em>nginx</em>
or <em>apache</em>.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>prefix</strong> (<em>str</em>) – URL path prefix for handled static files</li>
<li><strong>path</strong> – path to the folder in file system that contains
handled static files, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> or <code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code>.</li>
<li><strong>name</strong> (<em>str</em>) – optional route name.</li>
<li><strong>expect_handler</strong> (<em>coroutine</em>) – optional <em>expect</em> header handler.</li>
<li><strong>chunk_size</strong> (<em>int</em>) – <p>size of single chunk for file
downloading, 256Kb by default.</p>
<p>Increasing <em>chunk_size</em> parameter to,
say, 1Mb may increase file downloading
speed but consumes more memory.</p>
</li>
<li><strong>show_index</strong> (<em>bool</em>) – flag for allowing to show indexes of a directory,
by default it’s not allowed and HTTP/403 will
be returned on directory access.</li>
<li><strong>follow_symlinks</strong> (<em>bool</em>) – flag for allowing to follow symlinks from
a directory, by default it’s not allowed and
HTTP/404 will be returned on access.</li>
<li><strong>append_version</strong> (<em>bool</em>) – flag for adding file version (hash)
to the url query string, this value will
be used as default when you call to
<code class="xref py py-meth docutils literal notranslate"><span class="pre">StaticRoute.url()</span></code> and
<code class="xref py py-meth docutils literal notranslate"><span class="pre">StaticRoute.url_for()</span></code> methods.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">new <code class="xref py py-class docutils literal notranslate"><span class="pre">StaticRoute</span></code> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.resources">
<code class="descname">resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.resources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.resources" title="Permalink to this definition">¶</a></dt>
<dd><p>The method returns a <em>view</em> for <em>all</em> registered resources.</p>
<p>The view is an object that allows to:</p>
<ol class="arabic">
<li><p class="first">Get size of the router table:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">resources</span><span class="p">())</span>
</pre></div>
</div>
</li>
<li><p class="first">Iterate over registered resources:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">resources</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">resource</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Make a check if the resources is registered in the router table:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">route</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">resources</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ol>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.routes">
<code class="descname">routes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.routes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.routes" title="Permalink to this definition">¶</a></dt>
<dd><p>The method returns a <em>view</em> for <em>all</em> registered routes.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.UrlDispatcher.named_resources">
<code class="descname">named_resources</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlDispatcher.named_resources"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlDispatcher.named_resources" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>-like <code class="xref py py-class docutils literal notranslate"><span class="pre">types.MappingProxyType</span></code> <em>view</em> over
<em>all</em> named <strong>resources</strong>.</p>
<p>The view maps every named resource’s <strong>name</strong> to the
<code class="xref py py-class docutils literal notranslate"><span class="pre">BaseResource</span></code> instance. It supports the usual
<code class="xref py py-obj docutils literal notranslate"><span class="pre">dict</span></code>-like operations, except for any mutable operations
(i.e. it’s <strong>read-only</strong>):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">named_resources</span><span class="p">())</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">resource</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">named_resources</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">resource</span><span class="p">)</span>

<span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">named_resources</span><span class="p">()</span>

<span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">named_resources</span><span class="p">()[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="resource">
<span id="aiohttp-web-resource"></span><h3>Resource<a class="headerlink" href="#resource" title="Permalink to this headline">¶</a></h3>
<p>Default router <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDispatcher</span></code></a> operates with <a class="reference internal" href="glossary.html#term-resource"><span class="xref std std-term">resource</span></a>s.</p>
<p>Resource is an item in <em>routing table</em> which has a <em>path</em>, an optional
unique <em>name</em> and at least one <a class="reference internal" href="glossary.html#term-route"><span class="xref std std-term">route</span></a>.</p>
<p><a class="reference internal" href="glossary.html#term-web-handler"><span class="xref std std-term">web-handler</span></a> lookup is performed in the following way:</p>
<ol class="arabic simple">
<li>Router iterates over <em>resources</em> one-by-one.</li>
<li>If <em>resource</em> matches to requested URL the resource iterates over
own <em>routes</em>.</li>
<li>If route matches to requested HTTP method (or <code class="docutils literal notranslate"><span class="pre">'*'</span></code> wildcard) the
route’s handler is used as found <a class="reference internal" href="glossary.html#term-web-handler"><span class="xref std std-term">web-handler</span></a>. The lookup is
finished.</li>
<li>Otherwise router tries next resource from the <em>routing table</em>.</li>
<li>If the end of <em>routing table</em> is reached and no <em>resource</em> /
<em>route</em> pair found the <em>router</em> returns special <code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractMatchInfo</span></code>
instance with <code class="xref py py-attr docutils literal notranslate"><span class="pre">AbstractMatchInfo.http_exception</span></code> is not <code class="docutils literal notranslate"><span class="pre">None</span></code>
but <a class="reference internal" href="web_exceptions.html#aiohttp.web.HTTPException" title="aiohttp.web.HTTPException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">HTTPException</span></code></a> with  either <em>HTTP 404 Not Found</em> or
<em>HTTP 405 Method Not Allowed</em> status code.
Registered <code class="xref py py-attr docutils literal notranslate"><span class="pre">AbstractMatchInfo.handler</span></code> raises this exception on call.</li>
</ol>
<p>User should never instantiate resource classes but give it by
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_resource" title="aiohttp.web.UrlDispatcher.add_resource"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_resource()</span></code></a> call.</p>
<p>After that he may add a <a class="reference internal" href="glossary.html#term-route"><span class="xref std std-term">route</span></a> by calling <a class="reference internal" href="#aiohttp.web.Resource.add_route" title="aiohttp.web.Resource.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Resource.add_route()</span></code></a>.</p>
<p><a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_route()</span></code></a> is just shortcut for:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">router</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">add_route</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">handler</span><span class="p">)</span>
</pre></div>
</div>
<p>Resource with a <em>name</em> is called <em>named resource</em>.
The main purpose of <em>named resource</em> is constructing URL by route name for
passing it into <em>template engine</em> for example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="p">[</span><span class="s1">&#39;resource_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">url_for</span><span class="p">()</span><span class="o">.</span><span class="n">with_query</span><span class="p">({</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</pre></div>
</div>
<p>Resource classes hierarchy:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">AbstractResource</span>
  <span class="n">Resource</span>
    <span class="n">PlainResource</span>
    <span class="n">DynamicResource</span>
    <span class="n">StaticResource</span>
</pre></div>
</div>
<dl class="class">
<dt id="aiohttp.web.AbstractResource">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">AbstractResource</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#AbstractResource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AbstractResource" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for all resources.</p>
<p>Inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Sized</span></code> and
<code class="xref py py-class docutils literal notranslate"><span class="pre">collections.abc.Iterable</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">len(resource)</span></code> returns amount of <a class="reference internal" href="glossary.html#term-route"><span class="xref std std-term">route</span></a>s belongs to the resource,
<code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">route</span> <span class="pre">in</span> <span class="pre">resource</span></code> allows to iterate over these routes.</p>
<dl class="attribute">
<dt id="aiohttp.web.AbstractResource.name">
<code class="descname">name</code><a class="headerlink" href="#aiohttp.web.AbstractResource.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <em>name</em> of resource or <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.AbstractResource.canonical">
<code class="descname">canonical</code><a class="headerlink" href="#aiohttp.web.AbstractResource.canonical" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <em>canonical path</em> associate with the resource. For example
<code class="docutils literal notranslate"><span class="pre">/path/to</span></code> or <code class="docutils literal notranslate"><span class="pre">/path/{to}</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.AbstractResource.get_info">
<code class="descname">get_info</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#AbstractResource.get_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AbstractResource.get_info" title="Permalink to this definition">¶</a></dt>
<dd><p>A resource description, e.g. <code class="docutils literal notranslate"><span class="pre">{'path':</span> <span class="pre">'/path/to'}</span></code> or
<code class="docutils literal notranslate"><span class="pre">{'formatter':</span> <span class="pre">'/path/{to}',</span> <span class="pre">'pattern':</span>
<span class="pre">re.compile(r'^/path/(?P&lt;to&gt;[a-zA-Z][_a-zA-Z0-9]+)$</span></code></p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.AbstractResource.url_for">
<code class="descname">url_for</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#AbstractResource.url_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AbstractResource.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct an URL for route with additional params.</p>
<p><em>args</em> and <strong>kwargs</strong> depend on a parameters list accepted by
inherited resource class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code> – resulting URL instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.Resource">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">Resource</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#Resource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Resource" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for new-style resources, inherits <a class="reference internal" href="#aiohttp.web.AbstractResource" title="aiohttp.web.AbstractResource"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractResource</span></code></a>.</p>
<dl class="method">
<dt id="aiohttp.web.Resource.add_route">
<code class="descname">add_route</code><span class="sig-paren">(</span><em>method</em>, <em>handler</em>, <em>*</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#Resource.add_route"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.Resource.add_route" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a <a class="reference internal" href="glossary.html#term-web-handler"><span class="xref std std-term">web-handler</span></a> to resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>method</strong> (<em>str</em>) – <p>HTTP method for route. Should be one of
<code class="docutils literal notranslate"><span class="pre">'GET'</span></code>, <code class="docutils literal notranslate"><span class="pre">'POST'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PUT'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'DELETE'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PATCH'</span></code>, <code class="docutils literal notranslate"><span class="pre">'HEAD'</span></code>,
<code class="docutils literal notranslate"><span class="pre">'OPTIONS'</span></code> or <code class="docutils literal notranslate"><span class="pre">'*'</span></code> for any method.</p>
<p>The parameter is case-insensitive, e.g. you
can push <code class="docutils literal notranslate"><span class="pre">'get'</span></code> as well as <code class="docutils literal notranslate"><span class="pre">'GET'</span></code>.</p>
<p>The method should be unique for resource.</p>
</li>
<li><strong>handler</strong> (<em>callable</em>) – route handler.</li>
<li><strong>expect_handler</strong> (<em>coroutine</em>) – optional <em>expect</em> header handler.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">new <a class="reference internal" href="#aiohttp.web.ResourceRoute" title="aiohttp.web.ResourceRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceRoute</span></code></a> instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.PlainResource">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">PlainResource</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#PlainResource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.PlainResource" title="Permalink to this definition">¶</a></dt>
<dd><p>A resource, inherited from <a class="reference internal" href="#aiohttp.web.Resource" title="aiohttp.web.Resource"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resource</span></code></a>.</p>
<p>The class corresponds to resources with plain-text matching,
<code class="docutils literal notranslate"><span class="pre">'/path/to'</span></code> for example.</p>
<dl class="attribute">
<dt id="aiohttp.web.PlainResource.canonical">
<code class="descname">canonical</code><a class="headerlink" href="#aiohttp.web.PlainResource.canonical" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <em>canonical path</em> associate with the resource. Returns the path
used to create the PlainResource. For example <code class="docutils literal notranslate"><span class="pre">/path/to</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.PlainResource.url_for">
<code class="descname">url_for</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#PlainResource.url_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.PlainResource.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code> for the resource.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.DynamicResource">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">DynamicResource</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#DynamicResource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.DynamicResource" title="Permalink to this definition">¶</a></dt>
<dd><p>A resource, inherited from <a class="reference internal" href="#aiohttp.web.Resource" title="aiohttp.web.Resource"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resource</span></code></a>.</p>
<p>The class corresponds to resources with
<a class="reference internal" href="web_quickstart.html#aiohttp-web-variable-handler"><span class="std std-ref">variable</span></a> matching,
e.g. <code class="docutils literal notranslate"><span class="pre">'/path/{to}/{param}'</span></code> etc.</p>
<dl class="attribute">
<dt id="aiohttp.web.DynamicResource.canonical">
<code class="descname">canonical</code><a class="headerlink" href="#aiohttp.web.DynamicResource.canonical" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <em>canonical path</em> associate with the resource. Returns the
formatter obtained from the path used to create the DynamicResource.
For example, from a path <code class="docutils literal notranslate"><span class="pre">/get/{num:^\d+}</span></code>, it returns <code class="docutils literal notranslate"><span class="pre">/get/{num}</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.DynamicResource.url_for">
<code class="descname">url_for</code><span class="sig-paren">(</span><em>**params</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#DynamicResource.url_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.DynamicResource.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code> for the resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>params</strong> – <p>– a variable substitutions for dynamic resource.</p>
<p>E.g. for <code class="docutils literal notranslate"><span class="pre">'/path/{to}/{param}'</span></code> pattern the method should
be called as <code class="docutils literal notranslate"><span class="pre">resource.url_for(to='val1',</span> <span class="pre">param='val2')</span></code></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.StaticResource">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">StaticResource</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#StaticResource"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StaticResource" title="Permalink to this definition">¶</a></dt>
<dd><p>A resource, inherited from <a class="reference internal" href="#aiohttp.web.Resource" title="aiohttp.web.Resource"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resource</span></code></a>.</p>
<p>The class corresponds to resources for <a class="reference internal" href="web_advanced.html#aiohttp-web-static-file-handling"><span class="std std-ref">static file serving</span></a>.</p>
<dl class="attribute">
<dt id="aiohttp.web.StaticResource.canonical">
<code class="descname">canonical</code><a class="headerlink" href="#aiohttp.web.StaticResource.canonical" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <em>canonical path</em> associate with the resource. Returns the prefix
used to create the StaticResource. For example <code class="docutils literal notranslate"><span class="pre">/prefix</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.StaticResource.url_for">
<code class="descname">url_for</code><span class="sig-paren">(</span><em>filename</em>, <em>append_version=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#StaticResource.url_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StaticResource.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">URL</span></code> for file path under resource prefix.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> – <p>– a file name substitution for static file handler.</p>
<p>Accepts both <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code>.</p>
<p>E.g. an URL for <code class="docutils literal notranslate"><span class="pre">'/prefix/dir/file.txt'</span></code> should
be generated as <code class="docutils literal notranslate"><span class="pre">resource.url_for(filename='dir/file.txt')</span></code></p>
</li>
<li><strong>append_version</strong> (<em>bool</em>) – <dl class="docutils">
<dt>– a flag for adding file version</dt>
<dd>(hash) to the url query string for
cache boosting</dd>
</dl>
<p>By default has value from a constructor (<code class="docutils literal notranslate"><span class="pre">False</span></code> by default)
When set to <code class="docutils literal notranslate"><span class="pre">True</span></code> - <code class="docutils literal notranslate"><span class="pre">v=FILE_HASH</span></code> query string param will be added
When set to <code class="docutils literal notranslate"><span class="pre">False</span></code> has no impact</p>
<p>if file not found has no impact</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.PrefixedSubAppResource">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">PrefixedSubAppResource</code><a class="headerlink" href="#aiohttp.web.PrefixedSubAppResource" title="Permalink to this definition">¶</a></dt>
<dd><p>A resource for serving nested applications. The class instance is
returned by <a class="reference internal" href="#aiohttp.web.Application.add_subapp" title="aiohttp.web.Application.add_subapp"><code class="xref py py-class docutils literal notranslate"><span class="pre">add_subapp</span></code></a> call.</p>
<dl class="attribute">
<dt id="aiohttp.web.PrefixedSubAppResource.canonical">
<code class="descname">canonical</code><a class="headerlink" href="#aiohttp.web.PrefixedSubAppResource.canonical" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only <em>canonical path</em> associate with the resource. Returns the
prefix used to create the PrefixedSubAppResource.
For example <code class="docutils literal notranslate"><span class="pre">/prefix</span></code></p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.PrefixedSubAppResource.url_for">
<code class="descname">url_for</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#aiohttp.web.PrefixedSubAppResource.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>The call is not allowed, it raises <code class="xref py py-exc docutils literal notranslate"><span class="pre">RuntimeError</span></code>.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="route">
<span id="aiohttp-web-route"></span><h3>Route<a class="headerlink" href="#route" title="Permalink to this headline">¶</a></h3>
<p>Route has <em>HTTP method</em> (wildcard <code class="docutils literal notranslate"><span class="pre">'*'</span></code> is an option),
<a class="reference internal" href="glossary.html#term-web-handler"><span class="xref std std-term">web-handler</span></a> and optional <em>expect handler</em>.</p>
<p>Every route belong to some resource.</p>
<p>Route classes hierarchy:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">AbstractRoute</span>
  <span class="n">ResourceRoute</span>
  <span class="n">SystemRoute</span>
</pre></div>
</div>
<p><a class="reference internal" href="#aiohttp.web.ResourceRoute" title="aiohttp.web.ResourceRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">ResourceRoute</span></code></a> is the route used for resources,
<a class="reference internal" href="#aiohttp.web.SystemRoute" title="aiohttp.web.SystemRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">SystemRoute</span></code></a> serves URL resolving errors like <em>404 Not Found</em>
and <em>405 Method Not Allowed</em>.</p>
<dl class="class">
<dt id="aiohttp.web.AbstractRoute">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">AbstractRoute</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#AbstractRoute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AbstractRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for routes served by <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDispatcher</span></code></a>.</p>
<dl class="attribute">
<dt id="aiohttp.web.AbstractRoute.method">
<code class="descname">method</code><a class="headerlink" href="#aiohttp.web.AbstractRoute.method" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP method handled by the route, e.g. <em>GET</em>, <em>POST</em> etc.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.AbstractRoute.handler">
<code class="descname">handler</code><a class="headerlink" href="#aiohttp.web.AbstractRoute.handler" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="web_quickstart.html#aiohttp-web-handler"><span class="std std-ref">handler</span></a> that processes the route.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.AbstractRoute.name">
<code class="descname">name</code><a class="headerlink" href="#aiohttp.web.AbstractRoute.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the route, always equals to name of resource which owns the route.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.AbstractRoute.resource">
<code class="descname">resource</code><a class="headerlink" href="#aiohttp.web.AbstractRoute.resource" title="Permalink to this definition">¶</a></dt>
<dd><p>Resource instance which holds the route, <code class="docutils literal notranslate"><span class="pre">None</span></code> for
<a class="reference internal" href="#aiohttp.web.SystemRoute" title="aiohttp.web.SystemRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">SystemRoute</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.AbstractRoute.url_for">
<code class="descname">url_for</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#AbstractRoute.url_for"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AbstractRoute.url_for" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract method for constructing url handled by the route.</p>
<p>Actually it’s a shortcut for <code class="docutils literal notranslate"><span class="pre">route.resource.url_for(...)</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.ResourceRoute">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">ResourceRoute</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#ResourceRoute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.ResourceRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>The route class for handling different HTTP methods for <a class="reference internal" href="#aiohttp.web.Resource" title="aiohttp.web.Resource"><code class="xref py py-class docutils literal notranslate"><span class="pre">Resource</span></code></a>.</p>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.SystemRoute">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">SystemRoute</code><a class="headerlink" href="#aiohttp.web.SystemRoute" title="Permalink to this definition">¶</a></dt>
<dd><p>The route class for handling URL resolution errors like like <em>404 Not Found</em>
and <em>405 Method Not Allowed</em>.</p>
<dl class="attribute">
<dt id="aiohttp.web.SystemRoute.status">
<code class="descname">status</code><a class="headerlink" href="#aiohttp.web.SystemRoute.status" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP status code</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.SystemRoute.reason">
<code class="descname">reason</code><a class="headerlink" href="#aiohttp.web.SystemRoute.reason" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP status reason</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="routedef-and-staticdef">
<span id="aiohttp-web-route-def"></span><h3>RouteDef and StaticDef<a class="headerlink" href="#routedef-and-staticdef" title="Permalink to this headline">¶</a></h3>
<p>Route definition, a description for not registered yet route.</p>
<p>Could be used for filing route table by providing a list of route
definitions (Django style).</p>
<p>The definition is created by functions like <a class="reference internal" href="#aiohttp.web.get" title="aiohttp.web.get"><code class="xref py py-func docutils literal notranslate"><span class="pre">get()</span></code></a> or
<a class="reference internal" href="#aiohttp.web.post" title="aiohttp.web.post"><code class="xref py py-func docutils literal notranslate"><span class="pre">post()</span></code></a>, list of definitions could be added to router by
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_routes" title="aiohttp.web.UrlDispatcher.add_routes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_routes()</span></code></a> call:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiohttp</span> <span class="k">import</span> <span class="n">web</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">handle_get</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">handle_post</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>

<span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_routes</span><span class="p">([</span><span class="n">web</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/get&#39;</span><span class="p">,</span> <span class="n">handle_get</span><span class="p">),</span>
                       <span class="n">web</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/post&#39;</span><span class="p">,</span> <span class="n">handle_post</span><span class="p">),</span>
</pre></div>
</div>
<dl class="class">
<dt id="aiohttp.web.AbstractRouteDef">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">AbstractRouteDef</code><a class="reference internal" href="_modules/aiohttp/web_routedef.html#AbstractRouteDef"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AbstractRouteDef" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for route definitions.</p>
<p>Inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
<dl class="method">
<dt id="aiohttp.web.AbstractRouteDef.register">
<code class="descname">register</code><span class="sig-paren">(</span><em>router</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#AbstractRouteDef.register"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AbstractRouteDef.register" title="Permalink to this definition">¶</a></dt>
<dd><p>Register itself into <a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDispatcher</span></code></a>.</p>
<p>Abstract method, should be overridden by subclasses.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of registered <a class="reference internal" href="#aiohttp.web.AbstractRoute" title="aiohttp.web.AbstractRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRoute</span></code></a> objects.</td>
</tr>
</tbody>
</table>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.7: </span>Return value updated from <code class="docutils literal notranslate"><span class="pre">None</span></code> to <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of
<a class="reference internal" href="#aiohttp.web.AbstractRoute" title="aiohttp.web.AbstractRoute"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRoute</span></code></a> instances.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.RouteDef">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">RouteDef</code><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteDef"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteDef" title="Permalink to this definition">¶</a></dt>
<dd><p>A definition of not registered yet route.</p>
<p>Implements <a class="reference internal" href="#aiohttp.web.AbstractRouteDef" title="aiohttp.web.AbstractRouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRouteDef</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.1: </span>The class implements <a class="reference internal" href="#aiohttp.web.AbstractRouteDef" title="aiohttp.web.AbstractRouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRouteDef</span></code></a> interface.</p>
</div>
<dl class="attribute">
<dt id="aiohttp.web.RouteDef.method">
<code class="descname">method</code><a class="headerlink" href="#aiohttp.web.RouteDef.method" title="Permalink to this definition">¶</a></dt>
<dd><p>HTTP method (<code class="docutils literal notranslate"><span class="pre">GET</span></code>, <code class="docutils literal notranslate"><span class="pre">POST</span></code> etc.)  (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.RouteDef.path">
<code class="descname">path</code><a class="headerlink" href="#aiohttp.web.RouteDef.path" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to resource, e.g. <code class="docutils literal notranslate"><span class="pre">/path/to</span></code>. Could contain <code class="docutils literal notranslate"><span class="pre">{}</span></code>
brackets for <a class="reference internal" href="web_quickstart.html#aiohttp-web-variable-handler"><span class="std std-ref">variable resources</span></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code>).</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.RouteDef.handler">
<code class="descname">handler</code><a class="headerlink" href="#aiohttp.web.RouteDef.handler" title="Permalink to this definition">¶</a></dt>
<dd><p>An async function to handle HTTP request.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.RouteDef.kwargs">
<code class="descname">kwargs</code><a class="headerlink" href="#aiohttp.web.RouteDef.kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of additional arguments.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.StaticDef">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">StaticDef</code><a class="reference internal" href="_modules/aiohttp/web_routedef.html#StaticDef"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.StaticDef" title="Permalink to this definition">¶</a></dt>
<dd><p>A definition of static file resource.</p>
<p>Implements <a class="reference internal" href="#aiohttp.web.AbstractRouteDef" title="aiohttp.web.AbstractRouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractRouteDef</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
<dl class="attribute">
<dt id="aiohttp.web.StaticDef.prefix">
<code class="descname">prefix</code><a class="headerlink" href="#aiohttp.web.StaticDef.prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>A prefix used for static file handling, e.g. <code class="docutils literal notranslate"><span class="pre">/static</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StaticDef.path">
<code class="descname">path</code><a class="headerlink" href="#aiohttp.web.StaticDef.path" title="Permalink to this definition">¶</a></dt>
<dd><p>File system directory to serve, <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> or
<code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code>
(e.g. <code class="docutils literal notranslate"><span class="pre">'/home/web-service/path/to/static'</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.StaticDef.kwargs">
<code class="descname">kwargs</code><a class="headerlink" href="#aiohttp.web.StaticDef.kwargs" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> of additional arguments, see
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_static()</span></code></a> for a list of supported
options.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="aiohttp.web.get">
<code class="descclassname">aiohttp.web.</code><code class="descname">get</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>allow_head=True</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing <code class="docutils literal notranslate"><span class="pre">GET</span></code> requests. See
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_get" title="aiohttp.web.UrlDispatcher.add_get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_get()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.post">
<code class="descclassname">aiohttp.web.</code><code class="descname">post</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.post" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests. See
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_post" title="aiohttp.web.UrlDispatcher.add_post"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_post()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.head">
<code class="descclassname">aiohttp.web.</code><code class="descname">head</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> requests. See
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_head" title="aiohttp.web.UrlDispatcher.add_head"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_head()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.put">
<code class="descclassname">aiohttp.web.</code><code class="descname">put</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing <code class="docutils literal notranslate"><span class="pre">PUT</span></code> requests. See
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_put" title="aiohttp.web.UrlDispatcher.add_put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_put()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.patch">
<code class="descclassname">aiohttp.web.</code><code class="descname">patch</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing <code class="docutils literal notranslate"><span class="pre">PATCH</span></code> requests. See
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_patch" title="aiohttp.web.UrlDispatcher.add_patch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_patch()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.delete">
<code class="descclassname">aiohttp.web.</code><code class="descname">delete</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> requests. See
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_delete" title="aiohttp.web.UrlDispatcher.add_delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_delete()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.view">
<code class="descclassname">aiohttp.web.</code><code class="descname">view</code><span class="sig-paren">(</span><em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#view"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.view" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing <code class="docutils literal notranslate"><span class="pre">ANY</span></code> requests. See
<a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_view" title="aiohttp.web.UrlDispatcher.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_view()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.static">
<code class="descclassname">aiohttp.web.</code><code class="descname">static</code><span class="sig-paren">(</span><em>prefix</em>, <em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em>, <em>chunk_size=256*1024</em>, <em>show_index=False</em>, <em>follow_symlinks=False</em>, <em>append_version=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#static"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.static" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.StaticDef" title="aiohttp.web.StaticDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">StaticDef</span></code></a> for processing static files.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_static()</span></code></a> for information
about supported parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.route">
<code class="descclassname">aiohttp.web.</code><code class="descname">route</code><span class="sig-paren">(</span><em>method</em>, <em>path</em>, <em>handler</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#route"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.route" title="Permalink to this definition">¶</a></dt>
<dd><p>Return <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> for processing requests that decided by
<code class="docutils literal notranslate"><span class="pre">method</span></code>. See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_route()</span></code></a> for information
about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="routetabledef">
<span id="aiohttp-web-route-table-def"></span><h3>RouteTableDef<a class="headerlink" href="#routetabledef" title="Permalink to this headline">¶</a></h3>
<p>A routes table definition used for describing routes by decorators
(Flask style):</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiohttp</span> <span class="k">import</span> <span class="n">web</span>

<span class="n">routes</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">RouteTableDef</span><span class="p">()</span>

<span class="nd">@routes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;/get&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handle_get</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>


<span class="nd">@routes</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;/post&#39;</span><span class="p">)</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">handle_post</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="o">...</span>

<span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_routes</span><span class="p">(</span><span class="n">routes</span><span class="p">)</span>


<span class="nd">@routes</span><span class="o">.</span><span class="n">view</span><span class="p">(</span><span class="s2">&quot;/view&quot;</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">web</span><span class="o">.</span><span class="n">View</span><span class="p">):</span>
    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</pre></div>
</div>
<dl class="class">
<dt id="aiohttp.web.RouteTableDef">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">RouteTableDef</code><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef" title="Permalink to this definition">¶</a></dt>
<dd><p>A sequence of <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> instances (implements
<code class="xref py py-class docutils literal notranslate"><span class="pre">abc.collections.Sequence</span></code> protocol).</p>
<p>In addition to all standard <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> methods the class
provides also methods like <code class="docutils literal notranslate"><span class="pre">get()</span></code> and <code class="docutils literal notranslate"><span class="pre">post()</span></code> for adding new
route definition.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.3.</span></p>
</div>
<dl class="method">
<dt id="aiohttp.web.RouteTableDef.get">
<code class="descclassname">&#64;</code><code class="descname">get</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>allow_head=True</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering <code class="docutils literal notranslate"><span class="pre">GET</span></code> web-handler.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_get" title="aiohttp.web.UrlDispatcher.add_get"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_get()</span></code></a> for information about parameters.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.post">
<code class="descclassname">&#64;</code><code class="descname">post</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.post"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.post" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering <code class="docutils literal notranslate"><span class="pre">POST</span></code> web-handler.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_post" title="aiohttp.web.UrlDispatcher.add_post"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_post()</span></code></a> for information about parameters.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.head">
<code class="descclassname">&#64;</code><code class="descname">head</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.head" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> web-handler.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_head" title="aiohttp.web.UrlDispatcher.add_head"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_head()</span></code></a> for information about parameters.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.put">
<code class="descclassname">&#64;</code><code class="descname">put</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.put"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.put" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering <code class="docutils literal notranslate"><span class="pre">PUT</span></code> web-handler.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_put" title="aiohttp.web.UrlDispatcher.add_put"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_put()</span></code></a> for information about parameters.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.patch">
<code class="descclassname">&#64;</code><code class="descname">patch</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.patch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.patch" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering <code class="docutils literal notranslate"><span class="pre">PATCH</span></code> web-handler.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_patch" title="aiohttp.web.UrlDispatcher.add_patch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_patch()</span></code></a> for information about parameters.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.delete">
<code class="descclassname">&#64;</code><code class="descname">delete</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> web-handler.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_delete" title="aiohttp.web.UrlDispatcher.add_delete"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_delete()</span></code></a> for information about parameters.</p>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.view">
<code class="descclassname">&#64;</code><code class="descname">view</code><span class="sig-paren">(</span><em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.view"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.view" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering <code class="docutils literal notranslate"><span class="pre">ANY</span></code> methods
against a class-based view.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_view" title="aiohttp.web.UrlDispatcher.add_view"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_view()</span></code></a> for information about parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.static">
<code class="descname">static</code><span class="sig-paren">(</span><em>prefix</em>, <em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em>, <em>chunk_size=256*1024</em>, <em>show_index=False</em>, <em>follow_symlinks=False</em>, <em>append_version=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.static"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.static" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.StaticDef" title="aiohttp.web.StaticDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">StaticDef</span></code></a> item for registering static files processor.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_static" title="aiohttp.web.UrlDispatcher.add_static"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_static()</span></code></a> for information about
supported parameters.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1.</span></p>
</div>
</dd></dl>

<dl class="method">
<dt id="aiohttp.web.RouteTableDef.route">
<code class="descclassname">&#64;</code><code class="descname">route</code><span class="sig-paren">(</span><em>method</em>, <em>path</em>, <em>*</em>, <em>name=None</em>, <em>expect_handler=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_routedef.html#RouteTableDef.route"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.RouteTableDef.route" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new <a class="reference internal" href="#aiohttp.web.RouteDef" title="aiohttp.web.RouteDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">RouteDef</span></code></a> item for registering a web-handler
for arbitrary HTTP method.</p>
<p>See <a class="reference internal" href="#aiohttp.web.UrlDispatcher.add_route" title="aiohttp.web.UrlDispatcher.add_route"><code class="xref py py-meth docutils literal notranslate"><span class="pre">UrlDispatcher.add_route()</span></code></a> for information about parameters.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="matchinfo">
<h3>MatchInfo<a class="headerlink" href="#matchinfo" title="Permalink to this headline">¶</a></h3>
<p>After route matching web application calls found handler if any.</p>
<p>Matching result can be accessible from handler as
<a class="reference internal" href="#aiohttp.web.Request.match_info" title="aiohttp.web.Request.match_info"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Request.match_info</span></code></a> attribute.</p>
<p>In general the result may be any object derived from
<code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractMatchInfo</span></code> (<a class="reference internal" href="#aiohttp.web.UrlMappingMatchInfo" title="aiohttp.web.UrlMappingMatchInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlMappingMatchInfo</span></code></a> for default
<a class="reference internal" href="#aiohttp.web.UrlDispatcher" title="aiohttp.web.UrlDispatcher"><code class="xref py py-class docutils literal notranslate"><span class="pre">UrlDispatcher</span></code></a> router).</p>
<dl class="class">
<dt id="aiohttp.web.UrlMappingMatchInfo">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">UrlMappingMatchInfo</code><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#UrlMappingMatchInfo"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UrlMappingMatchInfo" title="Permalink to this definition">¶</a></dt>
<dd><p>Inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractMatchInfo</span></code>. Dict
items are filled by matching info and is <a class="reference internal" href="glossary.html#term-resource"><span class="xref std std-term">resource</span></a>-specific.</p>
<dl class="attribute">
<dt id="aiohttp.web.UrlMappingMatchInfo.expect_handler">
<code class="descname">expect_handler</code><a class="headerlink" href="#aiohttp.web.UrlMappingMatchInfo.expect_handler" title="Permalink to this definition">¶</a></dt>
<dd><p>A coroutine for handling <code class="docutils literal notranslate"><span class="pre">100-continue</span></code>.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.UrlMappingMatchInfo.handler">
<code class="descname">handler</code><a class="headerlink" href="#aiohttp.web.UrlMappingMatchInfo.handler" title="Permalink to this definition">¶</a></dt>
<dd><p>A coroutine for handling request.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.UrlMappingMatchInfo.route">
<code class="descname">route</code><a class="headerlink" href="#aiohttp.web.UrlMappingMatchInfo.route" title="Permalink to this definition">¶</a></dt>
<dd><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Route</span></code> instance for url matching.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="view">
<h3>View<a class="headerlink" href="#view" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="aiohttp.web.View">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">View</code><span class="sig-paren">(</span><em>request</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_urldispatcher.html#View"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.View" title="Permalink to this definition">¶</a></dt>
<dd><p>Inherited from <code class="xref py py-class docutils literal notranslate"><span class="pre">AbstractView</span></code>.</p>
<p>Base class for class based views. Implementations should derive from
<a class="reference internal" href="#aiohttp.web.View" title="aiohttp.web.View"><code class="xref py py-class docutils literal notranslate"><span class="pre">View</span></code></a> and override methods for handling HTTP verbs like
<code class="docutils literal notranslate"><span class="pre">get()</span></code> or <code class="docutils literal notranslate"><span class="pre">post()</span></code>:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyView</span><span class="p">(</span><span class="n">View</span><span class="p">):</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">get_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="k">await</span> <span class="n">post_response</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resp</span>

<span class="n">app</span><span class="o">.</span><span class="n">router</span><span class="o">.</span><span class="n">add_view</span><span class="p">(</span><span class="s1">&#39;/view&#39;</span><span class="p">,</span> <span class="n">MyView</span><span class="p">)</span>
</pre></div>
</div>
<p>The view raises <em>405 Method Not allowed</em>
(<a class="reference internal" href="web_exceptions.html#aiohttp.web.HTTPMethodNotAllowed" title="aiohttp.web.HTTPMethodNotAllowed"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPMethodNotAllowed</span></code></a>) if requested web verb is not
supported.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>request</strong> – instance of <a class="reference internal" href="#aiohttp.web.Request" title="aiohttp.web.Request"><code class="xref py py-class docutils literal notranslate"><span class="pre">Request</span></code></a> that has initiated a view
processing.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.View.request">
<code class="descname">request</code><a class="headerlink" href="#aiohttp.web.View.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Request sent to view’s constructor, read-only property.</p>
</dd></dl>

<p>Overridable coroutine methods: <code class="docutils literal notranslate"><span class="pre">connect()</span></code>, <code class="docutils literal notranslate"><span class="pre">delete()</span></code>,
<code class="docutils literal notranslate"><span class="pre">get()</span></code>, <code class="docutils literal notranslate"><span class="pre">head()</span></code>, <code class="docutils literal notranslate"><span class="pre">options()</span></code>, <code class="docutils literal notranslate"><span class="pre">patch()</span></code>, <code class="docutils literal notranslate"><span class="pre">post()</span></code>,
<code class="docutils literal notranslate"><span class="pre">put()</span></code>, <code class="docutils literal notranslate"><span class="pre">trace()</span></code>.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_quickstart.html#aiohttp-web-class-based-views"><span class="std std-ref">Class Based Views</span></a></p>
</div>
</div>
</div>
<div class="section" id="running-applications">
<span id="aiohttp-web-app-runners-reference"></span><h2>Running Applications<a class="headerlink" href="#running-applications" title="Permalink to this headline">¶</a></h2>
<p>To start web application there is <code class="docutils literal notranslate"><span class="pre">AppRunner</span></code> and site classes.</p>
<p>Runner is a storage for running application, sites are for running
application on specific TCP or Unix socket, e.g.:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">runner</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">AppRunner</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
<span class="k">await</span> <span class="n">runner</span><span class="o">.</span><span class="n">setup</span><span class="p">()</span>
<span class="n">site</span> <span class="o">=</span> <span class="n">web</span><span class="o">.</span><span class="n">TCPSite</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">8080</span><span class="p">)</span>
<span class="k">await</span> <span class="n">site</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="c1"># wait for finish signal</span>
<span class="k">await</span> <span class="n">runner</span><span class="o">.</span><span class="n">cleanup</span><span class="p">()</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0: </span><a class="reference internal" href="#aiohttp.web.AppRunner" title="aiohttp.web.AppRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AppRunner</span></code></a> / <a class="reference internal" href="#aiohttp.web.ServerRunner" title="aiohttp.web.ServerRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">ServerRunner</span></code></a> and <a class="reference internal" href="#aiohttp.web.TCPSite" title="aiohttp.web.TCPSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">TCPSite</span></code></a> /
<a class="reference internal" href="#aiohttp.web.UnixSite" title="aiohttp.web.UnixSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnixSite</span></code></a> / <a class="reference internal" href="#aiohttp.web.SockSite" title="aiohttp.web.SockSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">SockSite</span></code></a> are added in aiohttp 3.0</p>
</div>
<dl class="class">
<dt id="aiohttp.web.BaseRunner">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">BaseRunner</code><a class="reference internal" href="_modules/aiohttp/web_runner.html#BaseRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.BaseRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>A base class for runners. Use <a class="reference internal" href="#aiohttp.web.AppRunner" title="aiohttp.web.AppRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">AppRunner</span></code></a> for serving
<a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a>, <a class="reference internal" href="#aiohttp.web.ServerRunner" title="aiohttp.web.ServerRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">ServerRunner</span></code></a> for low-level
<a class="reference internal" href="#aiohttp.web.Server" title="aiohttp.web.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a>.</p>
<dl class="attribute">
<dt id="aiohttp.web.BaseRunner.server">
<code class="descname">server</code><a class="headerlink" href="#aiohttp.web.BaseRunner.server" title="Permalink to this definition">¶</a></dt>
<dd><p>Low-level web <a class="reference internal" href="#aiohttp.web.Server" title="aiohttp.web.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a> for handling HTTP requests,
read-only attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRunner.addresses">
<code class="descname">addresses</code><a class="headerlink" href="#aiohttp.web.BaseRunner.addresses" title="Permalink to this definition">¶</a></dt>
<dd><p>A  <code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code> of served sockets addresses.</p>
<p>See <code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.getsockname()</span></code> for items type.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.3.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.BaseRunner.sites">
<code class="descname">sites</code><a class="headerlink" href="#aiohttp.web.BaseRunner.sites" title="Permalink to this definition">¶</a></dt>
<dd><p>A read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">set</span></code> of served sites (<a class="reference internal" href="#aiohttp.web.TCPSite" title="aiohttp.web.TCPSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">TCPSite</span></code></a> /
<a class="reference internal" href="#aiohttp.web.UnixSite" title="aiohttp.web.UnixSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnixSite</span></code></a> / <a class="reference internal" href="#aiohttp.web.NamedPipeSite" title="aiohttp.web.NamedPipeSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">NamedPipeSite</span></code></a> / <a class="reference internal" href="#aiohttp.web.SockSite" title="aiohttp.web.SockSite"><code class="xref py py-class docutils literal notranslate"><span class="pre">SockSite</span></code></a> instances).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.AppRunner">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">AppRunner</code><span class="sig-paren">(</span><em>app</em>, <em>*</em>, <em>handle_signals=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_runner.html#AppRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.AppRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>A runner for <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a>. Used with conjunction with sites
to serve on specific port.</p>
<p>Inherited from <a class="reference internal" href="#aiohttp.web.BaseRunner" title="aiohttp.web.BaseRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRunner</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> (<a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><em>Application</em></a>) – web application instance to serve.</li>
<li><strong>handle_signals</strong> (<em>bool</em>) – add signal handlers for
<code class="xref py py-data docutils literal notranslate"><span class="pre">signal.SIGINT</span></code> and
<code class="xref py py-data docutils literal notranslate"><span class="pre">signal.SIGTERM</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> by
default).</li>
<li><strong>kwargs</strong> – named parameters to pass into
web protocol.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Supported <em>kwargs</em>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>tcp_keepalive</strong> (<em>bool</em>) – Enable TCP Keep-Alive. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</li>
<li><strong>keepalive_timeout</strong> (<em>int</em>) – Number of seconds before closing Keep-Alive
connection. Default: <code class="docutils literal notranslate"><span class="pre">75</span></code> seconds (NGINX’s default value).</li>
<li><strong>logger</strong> – Custom logger object. Default:
<code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.log.server_logger</span></code>.</li>
<li><strong>access_log</strong> – Custom logging object. Default:
<code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.log.access_logger</span></code>.</li>
<li><strong>access_log_class</strong> – Class for <cite>access_logger</cite>. Default:
<code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.helpers.AccessLogger</span></code>.
Must to be a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">aiohttp.abc.AbstractAccessLogger</span></code>.</li>
<li><strong>access_log_format</strong> (<em>str</em>) – Access log format string. Default:
<code class="xref py py-attr docutils literal notranslate"><span class="pre">helpers.AccessLogger.LOG_FORMAT</span></code>.</li>
<li><strong>max_line_size</strong> (<em>int</em>) – Optional maximum header line size. Default:
<code class="docutils literal notranslate"><span class="pre">8190</span></code>.</li>
<li><strong>max_headers</strong> (<em>int</em>) – Optional maximum header size. Default: <code class="docutils literal notranslate"><span class="pre">32768</span></code>.</li>
<li><strong>max_field_size</strong> (<em>int</em>) – Optional maximum header field size. Default:
<code class="docutils literal notranslate"><span class="pre">8190</span></code>.</li>
<li><strong>lingering_time</strong> (<em>float</em>) – Maximum time during which the server
reads and ignores additional data coming from the client when
lingering close is on.  Use <code class="docutils literal notranslate"><span class="pre">0</span></code> to disable lingering on
server channel closing.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="aiohttp.web.AppRunner.app">
<code class="descname">app</code><a class="headerlink" href="#aiohttp.web.AppRunner.app" title="Permalink to this definition">¶</a></dt>
<dd><p>Read-only attribute for accessing to <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> served
instance.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.ServerRunner">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">ServerRunner</code><span class="sig-paren">(</span><em>web_server</em>, <em>*</em>, <em>handle_signals=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_runner.html#ServerRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.ServerRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>A runner for low-level <a class="reference internal" href="#aiohttp.web.Server" title="aiohttp.web.Server"><code class="xref py py-class docutils literal notranslate"><span class="pre">Server</span></code></a>. Used with conjunction with sites
to serve on specific port.</p>
<p>Inherited from <a class="reference internal" href="#aiohttp.web.BaseRunner" title="aiohttp.web.BaseRunner"><code class="xref py py-class docutils literal notranslate"><span class="pre">BaseRunner</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>web_server</strong> (<a class="reference internal" href="#aiohttp.web.Server" title="aiohttp.web.Server"><em>Server</em></a>) – low-level web server instance to serve.</li>
<li><strong>handle_signals</strong> (<em>bool</em>) – add signal handlers for
<code class="xref py py-data docutils literal notranslate"><span class="pre">signal.SIGINT</span></code> and
<code class="xref py py-data docutils literal notranslate"><span class="pre">signal.SIGTERM</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> by
default).</li>
<li><strong>kwargs</strong> – named parameters to pass into
web protocol.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_lowlevel.html#aiohttp-web-lowlevel"><span class="std std-ref">Low Level Server</span></a> demonstrates low-level server usage</p>
</div>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.BaseSite">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">BaseSite</code><a class="reference internal" href="_modules/aiohttp/web_runner.html#BaseSite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.BaseSite" title="Permalink to this definition">¶</a></dt>
<dd><p>An abstract class for handled sites.</p>
<dl class="attribute">
<dt id="aiohttp.web.BaseSite.name">
<code class="descname">name</code><a class="headerlink" href="#aiohttp.web.BaseSite.name" title="Permalink to this definition">¶</a></dt>
<dd><p>An identifier for site, read-only <code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code> property. Could
be a handled URL or UNIX socket path.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiohttp.web.TCPSite">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">TCPSite</code><span class="sig-paren">(</span><em>runner</em>, <em>host=None</em>, <em>port=None</em>, <em>*</em>, <em>shutdown_timeout=60.0</em>, <em>ssl_context=None</em>, <em>backlog=128</em>, <em>reuse_address=None</em>, <em>reuse_port=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_runner.html#TCPSite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.TCPSite" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a runner on TCP socket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>runner</strong> – a runner to serve.</li>
<li><strong>host</strong> (<em>str</em>) – HOST to listen on, <code class="docutils literal notranslate"><span class="pre">'0.0.0.0'</span></code> if <code class="docutils literal notranslate"><span class="pre">None</span></code> (default).</li>
<li><strong>port</strong> (<em>int</em>) – PORT to listed on, <code class="docutils literal notranslate"><span class="pre">8080</span></code> if <code class="docutils literal notranslate"><span class="pre">None</span></code> (default).</li>
<li><strong>shutdown_timeout</strong> (<em>float</em>) – a timeout for closing opened
connections on <code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseSite.stop()</span></code>
call.</li>
<li><strong>ssl_context</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code> instance for serving
SSL/TLS secure server, <code class="docutils literal notranslate"><span class="pre">None</span></code> for plain HTTP
server (default).</li>
<li><strong>backlog</strong> (<em>int</em>) – <p>a number of unaccepted connections that the
system will allow before refusing new
connections, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.listen()</span></code> for details.</p>
<p><code class="docutils literal notranslate"><span class="pre">128</span></code> by default.</p>
</li>
<li><strong>reuse_address</strong> (<em>bool</em>) – tells the kernel to reuse a local socket in
TIME_WAIT state, without waiting for its
natural timeout to expire. If not specified
will automatically be set to True on UNIX.</li>
<li><strong>reuse_port</strong> (<em>bool</em>) – tells the kernel to allow this endpoint to be
bound to the same port as other existing
endpoints are bound to, so long as they all set
this flag when being created. This option is not
supported on Windows.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.UnixSite">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">UnixSite</code><span class="sig-paren">(</span><em>runner</em>, <em>path</em>, <em>*</em>, <em>shutdown_timeout=60.0</em>, <em>ssl_context=None</em>, <em>backlog=128</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_runner.html#UnixSite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.UnixSite" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a runner on UNIX socket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>runner</strong> – a runner to serve.</li>
<li><strong>path</strong> (<em>str</em>) – PATH to UNIX socket to listen.</li>
<li><strong>shutdown_timeout</strong> (<em>float</em>) – a timeout for closing opened
connections on <code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseSite.stop()</span></code>
call.</li>
<li><strong>ssl_context</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code> instance for serving
SSL/TLS secure server, <code class="docutils literal notranslate"><span class="pre">None</span></code> for plain HTTP
server (default).</li>
<li><strong>backlog</strong> (<em>int</em>) – <p>a number of unaccepted connections that the
system will allow before refusing new
connections, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.listen()</span></code> for details.</p>
<p><code class="docutils literal notranslate"><span class="pre">128</span></code> by default.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.NamedPipeSite">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">NamedPipeSite</code><span class="sig-paren">(</span><em>runner</em>, <em>path</em>, <em>*</em>, <em>shutdown_timeout=60.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_runner.html#NamedPipeSite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.NamedPipeSite" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a runner on Named Pipe in Windows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>runner</strong> – a runner to serve.</li>
<li><strong>path</strong> (<em>str</em>) – PATH of named pipe to listen.</li>
<li><strong>shutdown_timeout</strong> (<em>float</em>) – a timeout for closing opened
connections on <code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseSite.stop()</span></code>
call.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="aiohttp.web.SockSite">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">SockSite</code><span class="sig-paren">(</span><em>runner</em>, <em>sock</em>, <em>*</em>, <em>shutdown_timeout=60.0</em>, <em>ssl_context=None</em>, <em>backlog=128</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_runner.html#SockSite"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.SockSite" title="Permalink to this definition">¶</a></dt>
<dd><p>Serve a runner on UNIX socket.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>runner</strong> – a runner to serve.</li>
<li><strong>sock</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">socket.socket</span></code> to listen.</li>
<li><strong>shutdown_timeout</strong> (<em>float</em>) – a timeout for closing opened
connections on <code class="xref py py-meth docutils literal notranslate"><span class="pre">BaseSite.stop()</span></code>
call.</li>
<li><strong>ssl_context</strong> – a <code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code> instance for serving
SSL/TLS secure server, <code class="docutils literal notranslate"><span class="pre">None</span></code> for plain HTTP
server (default).</li>
<li><strong>backlog</strong> (<em>int</em>) – <p>a number of unaccepted connections that the
system will allow before refusing new
connections, see <code class="xref py py-meth docutils literal notranslate"><span class="pre">socket.listen()</span></code> for details.</p>
<p><code class="docutils literal notranslate"><span class="pre">128</span></code> by default.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="utilities">
<h2>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aiohttp.web.FileField">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">FileField</code><a class="reference internal" href="_modules/aiohttp/web_request.html#FileField"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.FileField" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="xref py py-class docutils literal notranslate"><span class="pre">namedtuple</span></code> instance that is returned as
multidict value by <code class="xref py py-meth docutils literal notranslate"><span class="pre">Request.POST()</span></code> if field is uploaded file.</p>
<dl class="attribute">
<dt id="aiohttp.web.FileField.name">
<code class="descname">name</code><a class="headerlink" href="#aiohttp.web.FileField.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Field name</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.FileField.filename">
<code class="descname">filename</code><a class="headerlink" href="#aiohttp.web.FileField.filename" title="Permalink to this definition">¶</a></dt>
<dd><p>File name as specified by uploading (client) side.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.FileField.file">
<code class="descname">file</code><a class="headerlink" href="#aiohttp.web.FileField.file" title="Permalink to this definition">¶</a></dt>
<dd><p>An <code class="xref py py-class docutils literal notranslate"><span class="pre">io.IOBase</span></code> instance with content of uploaded file.</p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.FileField.content_type">
<code class="descname">content_type</code><a class="headerlink" href="#aiohttp.web.FileField.content_type" title="Permalink to this definition">¶</a></dt>
<dd><p><em>MIME type</em> of uploaded file, <code class="docutils literal notranslate"><span class="pre">'text/plain'</span></code> by default.</p>
</dd></dl>

<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="web_quickstart.html#aiohttp-web-file-upload"><span class="std std-ref">File Uploads</span></a></p>
</div>
</dd></dl>

<dl class="function">
<dt id="aiohttp.web.run_app">
<code class="descclassname">aiohttp.web.</code><code class="descname">run_app</code><span class="sig-paren">(</span><em>app</em>, <em>*</em>, <em>debug=False</em>, <em>host=None</em>, <em>port=None</em>, <em>path=None</em>, <em>sock=None</em>, <em>shutdown_timeout=60.0</em>, <em>ssl_context=None</em>, <em>print=print</em>, <em>backlog=128</em>, <em>access_log_class=aiohttp.helpers.AccessLogger</em>, <em>access_log_format=aiohttp.helpers.AccessLogger.LOG_FORMAT</em>, <em>access_log=aiohttp.log.access_logger</em>, <em>handle_signals=True</em>, <em>reuse_address=None</em>, <em>reuse_port=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web.html#run_app"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.run_app" title="Permalink to this definition">¶</a></dt>
<dd><p>A utility function for running an application, serving it until
keyboard interrupt and performing a
<a class="reference internal" href="web_advanced.html#aiohttp-web-graceful-shutdown"><span class="std std-ref">Graceful shutdown</span></a>.</p>
<p>Suitable as handy tool for scaffolding aiohttp based projects.
Perhaps production config will use more sophisticated runner but it
good enough at least at very beginning stage.</p>
<p>The server will listen on any host or Unix domain socket path you supply.
If no hosts or paths are supplied, or only a port is supplied, a TCP server
listening on 0.0.0.0 (all hosts) will be launched.</p>
<p>Distributing HTTP traffic to multiple hosts or paths on the same
application process provides no performance benefit as the requests are
handled on the same event loop. See <a class="reference internal" href="deployment.html"><span class="doc">Server Deployment</span></a> for ways of
distributing work for increased performance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app</strong> – <a class="reference internal" href="#aiohttp.web.Application" title="aiohttp.web.Application"><code class="xref py py-class docutils literal notranslate"><span class="pre">Application</span></code></a> instance to run or a <em>coroutine</em>
that returns an application.</li>
<li><strong>debug</strong> (<em>bool</em>) – enable <span class="xref std std-ref">asyncio debug mode</span> if <code class="docutils literal notranslate"><span class="pre">True</span></code>.</li>
<li><strong>host</strong> (<em>str</em>) – TCP/IP host or a sequence of hosts for HTTP server.
Default is <code class="docutils literal notranslate"><span class="pre">'0.0.0.0'</span></code> if <em>port</em> has been specified
or if <em>path</em> is not supplied.</li>
<li><strong>port</strong> (<em>int</em>) – TCP/IP port for HTTP server. Default is <code class="docutils literal notranslate"><span class="pre">8080</span></code> for plain
text HTTP and <code class="docutils literal notranslate"><span class="pre">8443</span></code> for HTTP via SSL (when
<em>ssl_context</em> parameter is specified).</li>
<li><strong>path</strong> (<em>str</em>) – file system path for HTTP server Unix domain socket.
A sequence of file system paths can be used to bind
multiple domain sockets. Listening on Unix domain
sockets is not supported by all operating systems.</li>
<li><strong>sock</strong> (<em>socket</em>) – a preexisting socket object to accept connections on.
A sequence of socket objects can be passed.</li>
<li><strong>shutdown_timeout</strong> (<em>int</em>) – <p>a delay to wait for graceful server
shutdown before disconnecting all
open client sockets hard way.</p>
<p>A system with properly
<a class="reference internal" href="web_advanced.html#aiohttp-web-graceful-shutdown"><span class="std std-ref">Graceful shutdown</span></a>
implemented never waits for this
timeout but closes a server in a few
milliseconds.</p>
</li>
<li><strong>ssl_context</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">ssl.SSLContext</span></code> for HTTPS server,
<code class="docutils literal notranslate"><span class="pre">None</span></code> for HTTP connection.</li>
<li><strong>print</strong> – a callable compatible with <code class="xref py py-func docutils literal notranslate"><span class="pre">print()</span></code>. May be used
to override STDOUT output or suppress it. Passing <cite>None</cite>
disables output.</li>
<li><strong>backlog</strong> (<em>int</em>) – the number of unaccepted connections that the
system will allow before refusing new
connections (<code class="docutils literal notranslate"><span class="pre">128</span></code> by default).</li>
<li><strong>access_log_class</strong> – class for <cite>access_logger</cite>. Default:
<code class="xref py py-data docutils literal notranslate"><span class="pre">aiohttp.helpers.AccessLogger</span></code>.
Must to be a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">aiohttp.abc.AbstractAccessLogger</span></code>.</li>
<li><strong>access_log</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code> instance used for saving
access logs. Use <code class="docutils literal notranslate"><span class="pre">None</span></code> for disabling logs for
sake of speedup.</li>
<li><strong>access_log_format</strong> – access log format, see
<a class="reference internal" href="logging.html#aiohttp-logging-access-log-format-spec"><span class="std std-ref">Format specification</span></a>
for details.</li>
<li><strong>handle_signals</strong> (<em>bool</em>) – override signal TERM handling to gracefully
exit the application.</li>
<li><strong>reuse_address</strong> (<em>bool</em>) – tells the kernel to reuse a local socket in
TIME_WAIT state, without waiting for its
natural timeout to expire. If not specified
will automatically be set to True on UNIX.</li>
<li><strong>reuse_port</strong> (<em>bool</em>) – tells the kernel to allow this endpoint to be
bound to the same port as other existing
endpoints are bound to, so long as they all set
this flag when being created. This option is not
supported on Windows.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0: </span>Support <em>access_log_class</em> parameter.</p>
<p>Support <em>reuse_address</em>, <em>reuse_port</em> parameter.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.1: </span>Accept a coroutine as <em>app</em> parameter.</p>
</div>
</dd></dl>

</div>
<div class="section" id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="aiohttp.web.ContentCoding">
<em class="property">class </em><code class="descclassname">aiohttp.web.</code><code class="descname">ContentCoding</code><a class="reference internal" href="_modules/aiohttp/web_response.html#ContentCoding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.ContentCoding" title="Permalink to this definition">¶</a></dt>
<dd><p>An <code class="xref py py-class docutils literal notranslate"><span class="pre">enum.Enum</span></code> class of available Content Codings.</p>
<dl class="attribute">
<dt id="aiohttp.web.ContentCoding.deflate">
<code class="descname">deflate</code><a class="headerlink" href="#aiohttp.web.ContentCoding.deflate" title="Permalink to this definition">¶</a></dt>
<dd><p><em>DEFLATE compression</em></p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.ContentCoding.gzip">
<code class="descname">gzip</code><a class="headerlink" href="#aiohttp.web.ContentCoding.gzip" title="Permalink to this definition">¶</a></dt>
<dd><p><em>GZIP compression</em></p>
</dd></dl>

<dl class="attribute">
<dt id="aiohttp.web.ContentCoding.identity">
<code class="descname">identity</code><a class="headerlink" href="#aiohttp.web.ContentCoding.identity" title="Permalink to this definition">¶</a></dt>
<dd><p><em>no compression</em></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="middlewares">
<h2>Middlewares<a class="headerlink" href="#middlewares" title="Permalink to this headline">¶</a></h2>
<div class="section" id="normalize-path-middleware">
<h3>Normalize path middleware<a class="headerlink" href="#normalize-path-middleware" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="aiohttp.web.normalize_path_middleware">
<code class="descclassname">aiohttp.web.</code><code class="descname">normalize_path_middleware</code><span class="sig-paren">(</span><em>*</em>, <em>append_slash=True</em>, <em>remove_slash=False</em>, <em>merge_slashes=True</em>, <em>redirect_class=HTTPPermanentRedirect</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/aiohttp/web_middlewares.html#normalize_path_middleware"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiohttp.web.normalize_path_middleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Middleware factory which produces a middleware that normalizes
the path of a request. By normalizing it means:</p>
<blockquote>
<div><ul class="simple">
<li>Add or remove a trailing slash to the path.</li>
<li>Double slashes are replaced by one.</li>
</ul>
</div></blockquote>
<p>The middleware returns as soon as it finds a path that resolves
correctly. The order if both merge and append/remove are enabled is:</p>
<blockquote>
<div><ol class="arabic simple">
<li><em>merge_slashes</em></li>
<li><em>append_slash</em> or <em>remove_slash</em></li>
<li>both <em>merge_slashes</em> and <em>append_slash</em> or <em>remove_slash</em></li>
</ol>
</div></blockquote>
<p>If the path resolves with at least one of those conditions, it will
redirect to the new path.</p>
<p>Only one of <em>append_slash</em> and <em>remove_slash</em> can be enabled. If both are
<code class="docutils literal notranslate"><span class="pre">True</span></code> the factory will raise an <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code></p>
<p>If <em>append_slash</em> is <code class="docutils literal notranslate"><span class="pre">True</span></code> the middleware will append a slash when
needed. If a resource is defined with trailing slash and the request
comes without it, it will append it automatically.</p>
<p>If <em>remove_slash</em> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, <em>append_slash</em> must be <code class="docutils literal notranslate"><span class="pre">False</span></code>. When enabled
the middleware will remove trailing slashes and redirect if the resource is
defined.</p>
<p>If <em>merge_slashes</em> is <code class="docutils literal notranslate"><span class="pre">True</span></code>, merge multiple consecutive slashes in the
path into one.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.4: </span>Support for <em>remove_slash</em></p>
</div>
</dd></dl>

</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/teanga-logo.svg" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pret-a-llod&repo=teanga&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="create_workflow.html">How to create a workflow in Teanga</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_service.html">How to create a service in Teanga</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_workflow.html">How to run a workflow in Teanga</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, teanga maintainers.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.7.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/web_reference.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/pret-a-llod/teanga" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>